var re=Object.defineProperty;var X=Object.getOwnPropertySymbols;var se=Object.prototype.hasOwnProperty,le=Object.prototype.propertyIsEnumerable;var Q=(t,i,a)=>i in t?re(t,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[i]=a,W=(t,i)=>{for(var a in i||(i={}))se.call(i,a)&&Q(t,a,i[a]);if(X)for(var a of X(i))le.call(i,a)&&Q(t,a,i[a]);return t};import{u as j}from"./disk.0ffde448.js";import{_ as F,c as G,b as ne,j as de}from"./main.465728e1.js";import{J as A,B as p,k as S,L as g,M as D,T as R,b1 as Y,a0 as L,r as f,o as y,e as h,h as b,f as r,w as n,t as V,j as E,g as z,U as K,R as ue,a7 as fe,l as N,i as U,aj as ke,ah as me,m as ve,x as Z,u as P,F as ge}from"./vendor.d12b5734.js";const ce={props:{isEdit:{type:Boolean,require:!0,default:!1},loading:{type:Boolean,require:!0,default:!1},disks:{type:Array,require:!0,default:Array}},emits:["submit","onChangeDisk"],setup(t,{emit:i}){const a=j(),e=G(),{t:u}=A();let k=p(!1),s=p(!1),l=p(null),d=p(null);const c=S({get:()=>a.selected_driver,set:v=>{a.selected_driver=v,a.dropBoxDiskConfig.selected_driver=v}}),m=S(()=>({dropBoxDiskConfig:{root:{required:g.withMessage(u("validation.required"),D)},key:{required:g.withMessage(u("validation.required"),D)},secret:{required:g.withMessage(u("validation.required"),D)},token:{required:g.withMessage(u("validation.required"),D)},app:{required:g.withMessage(u("validation.required"),D)},selected_driver:{required:g.withMessage(u("validation.required"),D)},name:{required:g.withMessage(u("validation.required"),D)}}})),o=R(m,S(()=>a));Y(()=>{a.dropBoxDiskConfig={name:null,selected_driver:"dropbox",token:null,key:null,secret:null,app:null}}),B();async function B(){s.value=!0;let v=L({disk:"dropbox"});if(t.isEdit)Object.assign(a.dropBoxDiskConfig,e.data),k.value=e.data.set_as_default,k.value&&(l.value=!0);else{let $=await a.fetchDiskEnv(v);Object.assign(a.dropBoxDiskConfig,$.data)}d.value=t.disks.find($=>$.value=="dropbox"),s.value=!1}const M=S(()=>!!(t.isEdit&&k.value&&l.value));async function w(){if(o.value.dropBoxDiskConfig.$touch(),o.value.dropBoxDiskConfig.$invalid)return!0;let v={credentials:a.dropBoxDiskConfig,name:a.dropBoxDiskConfig.name,driver:d.value.value,set_as_default:k.value};return i("submit",v),!1}function I(){i("onChangeDisk",a.dropBoxDiskConfig.selected_driver)}return{v$:o,diskStore:a,selected_driver:c,set_as_default:k,isLoading:s,is_current_disk:l,selected_disk:d,isDisabled:M,loadData:B,submitData:w,onChangeDriver:I}}},De={class:"px-8 py-6"},Ce={key:0,class:"flex items-center mt-6"},pe={class:"relative flex items-center w-12"},_e={class:"ml-4 right"},be={class:"p-0 mb-1 text-base leading-snug text-black box-title"};function Se(t,i,a,e,u,k){const s=f("BaseInput"),l=f("BaseInputGroup"),d=f("BaseMultiselect"),c=f("BaseInputGrid"),m=f("BaseSwitch");return y(),h("form",{onSubmit:i[15]||(i[15]=K((...o)=>e.submitData&&e.submitData(...o),["prevent"]))},[b("div",De,[r(c,null,{default:n(()=>[r(l,{label:t.$t("settings.disk.name"),error:e.v$.dropBoxDiskConfig.name.$error&&e.v$.dropBoxDiskConfig.name.$errors[0].$message,required:""},{default:n(()=>[r(s,{modelValue:e.diskStore.dropBoxDiskConfig.name,"onUpdate:modelValue":i[0]||(i[0]=o=>e.diskStore.dropBoxDiskConfig.name=o),type:"text",name:"name",invalid:e.v$.dropBoxDiskConfig.name.$error,onInput:i[1]||(i[1]=o=>e.v$.dropBoxDiskConfig.name.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),r(l,{label:t.$t("settings.disk.driver"),error:e.v$.dropBoxDiskConfig.selected_driver.$error&&e.v$.dropBoxDiskConfig.selected_driver.$errors[0].$message,required:""},{default:n(()=>[r(d,{modelValue:e.selected_driver,"onUpdate:modelValue":[i[2]||(i[2]=o=>e.selected_driver=o),i[3]||(i[3]=o=>e.onChangeDriver(t.data))],invalid:e.v$.dropBoxDiskConfig.selected_driver.$error,"value-prop":"value",options:a.disks,searchable:"",label:"name","can-deselect":!1},null,8,["modelValue","invalid","options"])]),_:1},8,["label","error"]),r(l,{label:t.$t("settings.disk.dropbox_root"),error:e.v$.dropBoxDiskConfig.root.$error&&e.v$.dropBoxDiskConfig.root.$errors[0].$message,required:""},{default:n(()=>[r(s,{modelValue:e.diskStore.dropBoxDiskConfig.root,"onUpdate:modelValue":i[4]||(i[4]=o=>e.diskStore.dropBoxDiskConfig.root=o),modelModifiers:{trim:!0},type:"text",name:"name",placeholder:"Ex. /user/root/",invalid:e.v$.dropBoxDiskConfig.root.$error,onInput:i[5]||(i[5]=o=>e.v$.dropBoxDiskConfig.root.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),r(l,{label:t.$t("settings.disk.dropbox_token"),error:e.v$.dropBoxDiskConfig.token.$error&&e.v$.dropBoxDiskConfig.token.$errors[0].$message,required:""},{default:n(()=>[r(s,{modelValue:e.diskStore.dropBoxDiskConfig.token,"onUpdate:modelValue":i[6]||(i[6]=o=>e.diskStore.dropBoxDiskConfig.token=o),modelModifiers:{trim:!0},type:"text",name:"name",invalid:e.v$.dropBoxDiskConfig.token.$error,onInput:i[7]||(i[7]=o=>e.v$.dropBoxDiskConfig.token.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),r(l,{label:t.$t("settings.disk.dropbox_key"),error:e.v$.dropBoxDiskConfig.key.$error&&e.v$.dropBoxDiskConfig.key.$errors[0].$message,required:""},{default:n(()=>[r(s,{modelValue:e.diskStore.dropBoxDiskConfig.key,"onUpdate:modelValue":i[8]||(i[8]=o=>e.diskStore.dropBoxDiskConfig.key=o),modelModifiers:{trim:!0},type:"text",name:"name",placeholder:"Ex. KEIS4S39SERSDS",invalid:e.v$.dropBoxDiskConfig.key.$error,onInput:i[9]||(i[9]=o=>e.v$.dropBoxDiskConfig.key.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),r(l,{label:t.$t("settings.disk.dropbox_secret"),error:e.v$.dropBoxDiskConfig.secret.$error&&e.v$.dropBoxDiskConfig.secret.$errors[0].$message,required:""},{default:n(()=>[r(s,{modelValue:e.diskStore.dropBoxDiskConfig.secret,"onUpdate:modelValue":i[10]||(i[10]=o=>e.diskStore.dropBoxDiskConfig.secret=o),modelModifiers:{trim:!0},type:"text",name:"name",placeholder:"Ex. ********",invalid:e.v$.dropBoxDiskConfig.secret.$error,onInput:i[11]||(i[11]=o=>e.v$.dropBoxDiskConfig.secret.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),r(l,{label:t.$t("settings.disk.dropbox_app"),error:e.v$.dropBoxDiskConfig.app.$error&&e.v$.dropBoxDiskConfig.app.$errors[0].$message,required:""},{default:n(()=>[r(s,{modelValue:e.diskStore.dropBoxDiskConfig.app,"onUpdate:modelValue":i[12]||(i[12]=o=>e.diskStore.dropBoxDiskConfig.app=o),modelModifiers:{trim:!0},type:"text",name:"name",invalid:e.v$.dropBoxDiskConfig.app.$error,onInput:i[13]||(i[13]=o=>e.v$.dropBoxDiskConfig.app.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"])]),_:1}),e.isDisabled?E("",!0):(y(),h("div",Ce,[b("div",pe,[r(m,{modelValue:e.set_as_default,"onUpdate:modelValue":i[14]||(i[14]=o=>e.set_as_default=o),class:"flex"},null,8,["modelValue"])]),b("div",_e,[b("p",be,V(t.$t("settings.disk.is_default")),1)])]))]),z(t.$slots,"default",{diskData:{isLoading:e.isLoading,submitData:e.submitData}})],32)}var $e=F(ce,[["render",Se]]);const ye={props:{isEdit:{type:Boolean,require:!0,default:!1},loading:{type:Boolean,require:!0,default:!1},disks:{type:Array,require:!0,default:Array}},emits:["submit","onChangeDisk"],setup(t,{emit:i}){const a=j(),e=G(),{t:u}=A();let k=p(!1),s=p(!1),l=p(""),d=p(null);const c=S({get:()=>a.selected_driver,set:v=>{a.selected_driver=v,a.localDiskConfig.selected_driver=v}}),m=S(()=>({localDiskConfig:{name:{required:g.withMessage(u("validation.required"),D)},selected_driver:{required:g.withMessage(u("validation.required"),D)},root:{required:g.withMessage(u("validation.required"),D)}}})),o=R(m,S(()=>a));Y(()=>{a.localDiskConfig={name:null,selected_driver:"local",root:null}}),B();async function B(){k.value=!0;let v=L({disk:"local"});if(t.isEdit)Object.assign(a.localDiskConfig,e.data),a.localDiskConfig.root=e.data.credentials,s.value=e.data.set_as_default,s.value&&(d.value=!0);else{let $=await a.fetchDiskEnv(v);Object.assign(a.localDiskConfig,$.data)}l.value=t.disks.find($=>$.value=="local"),k.value=!1}const M=S(()=>!!(t.isEdit&&s.value&&d.value));async function w(){if(o.value.localDiskConfig.$touch(),o.value.localDiskConfig.$invalid)return!0;let v=L({credentials:a.localDiskConfig.root,name:a.localDiskConfig.name,driver:a.localDiskConfig.selected_driver,set_as_default:s.value});return i("submit",v),!1}function I(){i("onChangeDisk",a.localDiskConfig.selected_driver)}return{v$:o,diskStore:a,modalStore:e,selected_driver:c,selected_disk:l,isLoading:k,set_as_default:s,is_current_disk:d,submitData:w,onChangeDriver:I,isDisabled:M}}},Be={class:"px-4 sm:px-8 py-6"},xe={key:0,class:"flex items-center mt-6"},Ve={class:"relative flex items-center w-12"},qe={class:"ml-4 right"},Me={class:"p-0 mb-1 text-base leading-snug text-black box-title"};function we(t,i,a,e,u,k){const s=f("BaseInput"),l=f("BaseInputGroup"),d=f("BaseMultiselect"),c=f("BaseInputGrid"),m=f("BaseSwitch");return y(),h("form",{action:"",onSubmit:i[7]||(i[7]=K((...o)=>e.submitData&&e.submitData(...o),["prevent"]))},[b("div",Be,[r(c,null,{default:n(()=>[r(l,{label:t.$t("settings.disk.name"),error:e.v$.localDiskConfig.name.$error&&e.v$.localDiskConfig.name.$errors[0].$message,required:""},{default:n(()=>[r(s,{modelValue:e.diskStore.localDiskConfig.name,"onUpdate:modelValue":i[0]||(i[0]=o=>e.diskStore.localDiskConfig.name=o),type:"text",name:"name",invalid:e.v$.localDiskConfig.name.$error,onInput:i[1]||(i[1]=o=>e.v$.localDiskConfig.name.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),r(l,{label:t.$tc("settings.disk.driver"),error:e.v$.localDiskConfig.selected_driver.$error&&e.v$.localDiskConfig.selected_driver.$errors[0].$message,required:""},{default:n(()=>[r(d,{modelValue:e.selected_driver,"onUpdate:modelValue":[i[2]||(i[2]=o=>e.selected_driver=o),i[3]||(i[3]=o=>e.onChangeDriver(t.data))],"value-prop":"value",invalid:e.v$.localDiskConfig.selected_driver.$error,options:a.disks,searchable:"",label:"name","can-deselect":!1},null,8,["modelValue","invalid","options"])]),_:1},8,["label","error"]),r(l,{label:t.$t("settings.disk.local_root"),error:e.v$.localDiskConfig.root.$error&&e.v$.localDiskConfig.root.$errors[0].$message,required:""},{default:n(()=>[r(s,{modelValue:e.diskStore.localDiskConfig.root,"onUpdate:modelValue":i[4]||(i[4]=o=>e.diskStore.localDiskConfig.root=o),modelModifiers:{trim:!0},type:"text",name:"name",invalid:e.v$.localDiskConfig.root.$error,placeholder:"Ex./user/root/",onInput:i[5]||(i[5]=o=>e.v$.localDiskConfig.root.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"])]),_:1}),e.isDisabled?E("",!0):(y(),h("div",xe,[b("div",Ve,[r(m,{modelValue:e.set_as_default,"onUpdate:modelValue":i[6]||(i[6]=o=>e.set_as_default=o),class:"flex"},null,8,["modelValue"])]),b("div",qe,[b("p",Me,V(t.$t("settings.disk.is_default")),1)])]))]),z(t.$slots,"default",{diskData:{isLoading:e.isLoading,submitData:e.submitData}})],32)}var Ie=F(ye,[["render",we]]);const he={props:{isEdit:{type:Boolean,require:!0,default:!1},loading:{type:Boolean,require:!0,default:!1},disks:{type:Array,require:!0,default:Array}},emits:["submit","onChangeDisk"],setup(t,{emit:i}){const a=j(),e=G(),{t:u}=A();let k=p(!1),s=p(!1),l=p(null),d=p(null);const c=S({get:()=>a.selected_driver,set:v=>{a.selected_driver=v,a.s3DiskConfigData.selected_driver=v}}),m=S(()=>({s3DiskConfigData:{name:{required:g.withMessage(u("validation.required"),D)},root:{required:g.withMessage(u("validation.required"),D)},key:{required:g.withMessage(u("validation.required"),D)},secret:{required:g.withMessage(u("validation.required"),D)},region:{required:g.withMessage(u("validation.required"),D)},bucket:{required:g.withMessage(u("validation.required"),D)},selected_driver:{required:g.withMessage(u("validation.required"),D)}}})),o=R(m,S(()=>a));Y(()=>{a.s3DiskConfigData={name:null,selected_driver:"s3",key:null,secret:null,region:null,bucket:null,root:null}}),B();async function B(){s.value=!0;let v=L({disk:"s3"});if(t.isEdit)Object.assign(a.s3DiskConfigData,e.data),k.value=e.data.set_as_default,k.value&&(d.value=!0);else{let $=await a.fetchDiskEnv(v);Object.assign(a.s3DiskConfigData,$.data)}l.value=t.disks.find($=>$.value=="s3"),s.value=!1}const M=S(()=>!!(t.isEdit&&k.value&&d.value));async function w(){if(o.value.s3DiskConfigData.$touch(),o.value.s3DiskConfigData.$invalid)return!0;let v={credentials:a.s3DiskConfigData,name:a.s3DiskConfigData.name,driver:l.value.value,set_as_default:k.value};return i("submit",v),!1}function I(){i("onChangeDisk",a.s3DiskConfigData.selected_driver)}return{v$:o,diskStore:a,modalStore:e,set_as_default:k,isLoading:s,selected_disk:l,selected_driver:c,is_current_disk:d,loadData:B,submitData:w,onChangeDriver:I,isDisabled:M}}},Ee={class:"px-8 py-6"},Ue={key:0,class:"flex items-center mt-6"},Le={class:"relative flex items-center w-12"},Ne={class:"ml-4 right"},je={class:"p-0 mb-1 text-base leading-snug text-black box-title"};function Ge(t,i,a,e,u,k){const s=f("BaseInput"),l=f("BaseInputGroup"),d=f("BaseMultiselect"),c=f("BaseInputGrid"),m=f("BaseSwitch");return y(),h("form",{onSubmit:i[15]||(i[15]=K((...o)=>e.submitData&&e.submitData(...o),["prevent"]))},[b("div",Ee,[r(c,null,{default:n(()=>[r(l,{label:t.$t("settings.disk.name"),error:e.v$.s3DiskConfigData.name.$error&&e.v$.s3DiskConfigData.name.$errors[0].$message,required:""},{default:n(()=>[r(s,{modelValue:e.diskStore.s3DiskConfigData.name,"onUpdate:modelValue":i[0]||(i[0]=o=>e.diskStore.s3DiskConfigData.name=o),type:"text",name:"name",invalid:e.v$.s3DiskConfigData.name.$error,onInput:i[1]||(i[1]=o=>e.v$.s3DiskConfigData.name.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),r(l,{label:t.$tc("settings.disk.driver"),error:e.v$.s3DiskConfigData.selected_driver.$error&&e.v$.s3DiskConfigData.selected_driver.$errors[0].$message,required:""},{default:n(()=>[r(d,{modelValue:e.selected_driver,"onUpdate:modelValue":[i[2]||(i[2]=o=>e.selected_driver=o),i[3]||(i[3]=o=>e.onChangeDriver(t.data))],invalid:e.v$.s3DiskConfigData.selected_driver.$error,"value-prop":"value",options:a.disks,searchable:"",label:"name","can-deselect":!1},null,8,["modelValue","invalid","options"])]),_:1},8,["label","error"]),r(l,{label:t.$t("settings.disk.aws_root"),error:e.v$.s3DiskConfigData.root.$error&&e.v$.s3DiskConfigData.root.$errors[0].$message,required:""},{default:n(()=>[r(s,{modelValue:e.diskStore.s3DiskConfigData.root,"onUpdate:modelValue":i[4]||(i[4]=o=>e.diskStore.s3DiskConfigData.root=o),modelModifiers:{trim:!0},type:"text",name:"name",placeholder:"Ex. /user/root/",invalid:e.v$.s3DiskConfigData.root.$error,onInput:i[5]||(i[5]=o=>e.v$.s3DiskConfigData.root.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),r(l,{label:t.$t("settings.disk.aws_key"),error:e.v$.s3DiskConfigData.key.$error&&e.v$.s3DiskConfigData.key.$errors[0].$message,required:""},{default:n(()=>[r(s,{modelValue:e.diskStore.s3DiskConfigData.key,"onUpdate:modelValue":i[6]||(i[6]=o=>e.diskStore.s3DiskConfigData.key=o),modelModifiers:{trim:!0},type:"text",name:"name",placeholder:"Ex. KEIS4S39SERSDS",invalid:e.v$.s3DiskConfigData.key.$error,onInput:i[7]||(i[7]=o=>e.v$.s3DiskConfigData.key.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),r(l,{label:t.$t("settings.disk.aws_secret"),error:e.v$.s3DiskConfigData.secret.$error&&e.v$.s3DiskConfigData.secret.$errors[0].$message,required:""},{default:n(()=>[r(s,{modelValue:e.diskStore.s3DiskConfigData.secret,"onUpdate:modelValue":i[8]||(i[8]=o=>e.diskStore.s3DiskConfigData.secret=o),modelModifiers:{trim:!0},type:"text",name:"name",placeholder:"Ex. ********",invalid:e.v$.s3DiskConfigData.secret.$error,onInput:i[9]||(i[9]=o=>e.v$.s3DiskConfigData.secret.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),r(l,{label:t.$t("settings.disk.aws_region"),error:e.v$.s3DiskConfigData.region.$error&&e.v$.s3DiskConfigData.region.$errors[0].$message,required:""},{default:n(()=>[r(s,{modelValue:e.diskStore.s3DiskConfigData.region,"onUpdate:modelValue":i[10]||(i[10]=o=>e.diskStore.s3DiskConfigData.region=o),modelModifiers:{trim:!0},type:"text",name:"name",placeholder:"Ex. us-west",invalid:e.v$.s3DiskConfigData.region.$error,onInput:i[11]||(i[11]=o=>e.v$.s3DiskConfigData.region.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),r(l,{label:t.$t("settings.disk.aws_bucket"),error:e.v$.s3DiskConfigData.bucket.$error&&e.v$.s3DiskConfigData.bucket.$errors[0].$message,required:""},{default:n(()=>[r(s,{modelValue:e.diskStore.s3DiskConfigData.bucket,"onUpdate:modelValue":i[12]||(i[12]=o=>e.diskStore.s3DiskConfigData.bucket=o),modelModifiers:{trim:!0},type:"text",name:"name",placeholder:"Ex. AppName",invalid:e.v$.s3DiskConfigData.bucket.$error,onInput:i[13]||(i[13]=o=>e.v$.s3DiskConfigData.bucket.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"])]),_:1}),e.isDisabled?E("",!0):(y(),h("div",Ue,[b("div",Le,[r(m,{modelValue:e.set_as_default,"onUpdate:modelValue":i[14]||(i[14]=o=>e.set_as_default=o),class:"flex"},null,8,["modelValue"])]),b("div",Ne,[b("p",je,V(t.$t("settings.disk.is_default")),1)])]))]),z(t.$slots,"default",{diskData:{isLoading:e.isLoading,submitData:e.submitData}})],32)}var Oe=F(he,[["render",Ge]]);const Fe={props:{isEdit:{type:Boolean,require:!0,default:!1},loading:{type:Boolean,require:!0,default:!1},disks:{type:Array,require:!0,default:Array}},emits:["submit","onChangeDisk"],setup(t,{emit:i}){const a=j(),e=G(),{t:u}=A();let k=p(!1),s=p(!1),l=p(""),d=p(null);const c=S({get:()=>a.selected_driver,set:v=>{a.selected_driver=v,a.doSpaceDiskConfig.selected_driver=v}}),m=S(()=>({doSpaceDiskConfig:{root:{required:g.withMessage(u("validation.required"),D)},key:{required:g.withMessage(u("validation.required"),D)},secret:{required:g.withMessage(u("validation.required"),D)},region:{required:g.withMessage(u("validation.required"),D)},endpoint:{required:g.withMessage(u("validation.required"),D),url:g.withMessage(u("validation.invalid_url"),ue)},bucket:{required:g.withMessage(u("validation.required"),D)},selected_driver:{required:g.withMessage(u("validation.required"),D)},name:{required:g.withMessage(u("validation.required"),D)}}})),o=R(m,S(()=>a));Y(()=>{a.doSpaceDiskConfig={name:null,selected_driver:"doSpaces",key:null,secret:null,region:null,bucket:null,endpoint:null,root:null}}),B();async function B(){k.value=!0;let v=L({disk:"doSpaces"});if(t.isEdit)Object.assign(a.doSpaceDiskConfig,JSON.parse(e.data.credentials)),s.value=e.data.set_as_default,s.value&&(d.value=!0);else{let $=await a.fetchDiskEnv(v);Object.assign(a.doSpaceDiskConfig,$.data)}l.value=t.disks.find($=>$.value=="doSpaces"),k.value=!1}const M=S(()=>!!(t.isEdit&&s.value&&d.value));async function w(){if(o.value.doSpaceDiskConfig.$touch(),o.value.doSpaceDiskConfig.$invalid)return!0;let v={credentials:a.doSpaceDiskConfig,name:a.doSpaceDiskConfig.name,driver:l.value.value,set_as_default:s.value};return i("submit",v),!1}function I(){i("onChangeDisk",a.doSpaceDiskConfig.selected_driver)}return{v$:o,diskStore:a,selected_driver:c,isLoading:k,set_as_default:s,selected_disk:l,is_current_disk:d,loadData:B,submitData:w,onChangeDriver:I,isDisabled:M}}},Ae={class:"px-8 py-6"},Te={key:0,class:"flex items-center mt-6"},Re={class:"relative flex items-center w-12"},Ye={class:"ml-4 right"},ze={class:"p-0 mb-1 text-base leading-snug text-black box-title"};function Ke(t,i,a,e,u,k){const s=f("BaseInput"),l=f("BaseInputGroup"),d=f("BaseMultiselect"),c=f("BaseInputGrid"),m=f("BaseSwitch");return y(),h("form",{onSubmit:i[17]||(i[17]=K((...o)=>e.submitData&&e.submitData(...o),["prevent"]))},[b("div",Ae,[r(c,null,{default:n(()=>[r(l,{label:t.$t("settings.disk.name"),error:e.v$.doSpaceDiskConfig.name.$error&&e.v$.doSpaceDiskConfig.name.$errors[0].$message,required:""},{default:n(()=>[r(s,{modelValue:e.diskStore.doSpaceDiskConfig.name,"onUpdate:modelValue":i[0]||(i[0]=o=>e.diskStore.doSpaceDiskConfig.name=o),type:"text",name:"name",invalid:e.v$.doSpaceDiskConfig.name.$error,onInput:i[1]||(i[1]=o=>e.v$.doSpaceDiskConfig.name.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),r(l,{label:t.$tc("settings.disk.driver"),error:e.v$.doSpaceDiskConfig.selected_driver.$error&&e.v$.doSpaceDiskConfig.selected_driver.$errors[0].$message,required:""},{default:n(()=>[r(d,{modelValue:e.selected_driver,"onUpdate:modelValue":[i[2]||(i[2]=o=>e.selected_driver=o),i[3]||(i[3]=o=>e.onChangeDriver(t.data))],invalid:e.v$.doSpaceDiskConfig.selected_driver.$error,"value-prop":"value",options:a.disks,searchable:"",label:"name","can-deselect":!1,"track-by":"name"},null,8,["modelValue","invalid","options"])]),_:1},8,["label","error"]),r(l,{label:t.$t("settings.disk.do_spaces_root"),error:e.v$.doSpaceDiskConfig.root.$error&&e.v$.doSpaceDiskConfig.root.$errors[0].$message,required:""},{default:n(()=>[r(s,{modelValue:e.diskStore.doSpaceDiskConfig.root,"onUpdate:modelValue":i[4]||(i[4]=o=>e.diskStore.doSpaceDiskConfig.root=o),modelModifiers:{trim:!0},type:"text",name:"name",placeholder:"Ex. /user/root/",invalid:e.v$.doSpaceDiskConfig.root.$error,onInput:i[5]||(i[5]=o=>e.v$.doSpaceDiskConfig.root.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),r(l,{label:t.$t("settings.disk.do_spaces_key"),error:e.v$.doSpaceDiskConfig.key.$error&&e.v$.doSpaceDiskConfig.key.$errors[0].$message,required:""},{default:n(()=>[r(s,{modelValue:e.diskStore.doSpaceDiskConfig.key,"onUpdate:modelValue":i[6]||(i[6]=o=>e.diskStore.doSpaceDiskConfig.key=o),modelModifiers:{trim:!0},type:"text",name:"name",placeholder:"Ex. KEIS4S39SERSDS",invalid:e.v$.doSpaceDiskConfig.key.$error,onInput:i[7]||(i[7]=o=>e.v$.doSpaceDiskConfig.key.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),r(l,{label:t.$t("settings.disk.do_spaces_secret"),error:e.v$.doSpaceDiskConfig.secret.$error&&e.v$.doSpaceDiskConfig.secret.$errors[0].$message,required:""},{default:n(()=>[r(s,{modelValue:e.diskStore.doSpaceDiskConfig.secret,"onUpdate:modelValue":i[8]||(i[8]=o=>e.diskStore.doSpaceDiskConfig.secret=o),modelModifiers:{trim:!0},type:"text",name:"name",placeholder:"Ex. ********",invalid:e.v$.doSpaceDiskConfig.secret.$error,onInput:i[9]||(i[9]=o=>e.v$.doSpaceDiskConfig.secret.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),r(l,{label:t.$t("settings.disk.do_spaces_region"),error:e.v$.doSpaceDiskConfig.region.$error&&e.v$.doSpaceDiskConfig.region.$errors[0].$message,required:""},{default:n(()=>[r(s,{modelValue:e.diskStore.doSpaceDiskConfig.region,"onUpdate:modelValue":i[10]||(i[10]=o=>e.diskStore.doSpaceDiskConfig.region=o),modelModifiers:{trim:!0},type:"text",name:"name",placeholder:"Ex. nyc3",invalid:e.v$.doSpaceDiskConfig.region.$error,onInput:i[11]||(i[11]=o=>e.v$.doSpaceDiskConfig.region.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),r(l,{label:t.$t("settings.disk.do_spaces_endpoint"),error:e.v$.doSpaceDiskConfig.endpoint.$error&&e.v$.doSpaceDiskConfig.endpoint.$errors[0].$message,required:""},{default:n(()=>[r(s,{modelValue:e.diskStore.doSpaceDiskConfig.endpoint,"onUpdate:modelValue":i[12]||(i[12]=o=>e.diskStore.doSpaceDiskConfig.endpoint=o),modelModifiers:{trim:!0},type:"text",name:"name",placeholder:"Ex. https://nyc3.digitaloceanspaces.com",invalid:e.v$.doSpaceDiskConfig.endpoint.$error,onInput:i[13]||(i[13]=o=>e.v$.doSpaceDiskConfig.endpoint.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),r(l,{label:t.$t("settings.disk.do_spaces_bucket"),error:e.v$.doSpaceDiskConfig.bucket.$error&&e.v$.doSpaceDiskConfig.bucket.$errors[0].$message,required:""},{default:n(()=>[r(s,{modelValue:e.diskStore.doSpaceDiskConfig.bucket,"onUpdate:modelValue":i[14]||(i[14]=o=>e.diskStore.doSpaceDiskConfig.bucket=o),modelModifiers:{trim:!0},type:"text",name:"name",placeholder:"Ex. my-new-space",invalid:e.v$.doSpaceDiskConfig.bucket.$error,onInput:i[15]||(i[15]=o=>e.v$.doSpaceDiskConfig.bucket.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"])]),_:1}),e.isDisabled?E("",!0):(y(),h("div",Te,[b("div",Re,[r(m,{modelValue:e.set_as_default,"onUpdate:modelValue":i[16]||(i[16]=o=>e.set_as_default=o),class:"flex"},null,8,["modelValue"])]),b("div",Ye,[b("p",ze,V(t.$t("settings.disk.is_default")),1)])]))]),z(t.$slots,"default",{diskData:{isLoading:e.isLoading,submitData:e.submitData}})],32)}var Pe=F(Fe,[["render",Ke]]);const Je={components:{Dropbox:$e,Local:Ie,S3:Oe,DoSpaces:Pe},setup(){const t=j(),i=G();let a=p(!1),e=p(!1);fe(()=>{i.id&&(e.value=!0)});const u=S(()=>i.active&&i.componentName==="FileDiskModal");function k(m){return m&&(m.diskData.isLoading.value||a.value)}async function s(){a.value=!0;let m=await t.fetchDiskDrivers();e.value?t.selected_driver=i.data.driver:t.selected_driver=m.data.drivers[0].value,a.value=!1}async function l(m){Object.assign(t.diskConfigData,m),a.value=!0;let o=W({id:i.id},m);await(e.value?t.updateDisk:t.createDisk)(o),a.value=!1,i.refreshData(),d()}function d(){i.closeModal()}function c(m){t.selected_driver=m,t.diskConfigData.selected_driver=m}return{isEdit:e,createNewDisk:l,isRequestFire:k,diskStore:t,closeDiskModal:d,loadData:s,diskChange:c,modalStore:i,isLoading:a,modalActive:u}}},He={class:"flex justify-between w-full"},Xe={class:"file-disk-modal"},Qe={class:"z-0 flex justify-end p-4 border-t border-solid border-gray-light"};function We(t,i,a,e,u,k){const s=f("BaseIcon"),l=f("BaseButton"),d=f("BaseModal");return y(),N(d,{show:e.modalActive,onClose:e.closeDiskModal,onOpen:e.loadData},{header:n(()=>[b("div",He,[U(V(e.modalStore.title)+" ",1),r(s,{name:"XIcon",class:"h-6 w-6 text-gray-500 cursor-pointer",onClick:e.closeDiskModal},null,8,["onClick"])])]),default:n(()=>[b("div",Xe,[(y(),N(ke(e.diskStore.selected_driver),{loading:e.isLoading,disks:e.diskStore.getDiskDrivers,"is-edit":e.isEdit,onOnChangeDisk:i[0]||(i[0]=c=>e.diskChange(c)),onSubmit:e.createNewDisk},{default:n(c=>[b("div",Qe,[r(l,{class:"mr-3 text-sm",variant:"primary-outline",type:"button",onClick:e.closeDiskModal},{default:n(()=>[U(V(t.$t("general.cancel")),1)]),_:1},8,["onClick"]),r(l,{loading:e.isRequestFire(c),disabled:e.isRequestFire(c),variant:"primary",type:"submit"},{default:n(()=>[e.isRequestFire(c)?E("",!0):(y(),N(s,{key:0,name:"SaveIcon",class:"w-6 mr-2"})),U(" "+V(t.$t("general.save")),1)]),_:2},1032,["loading","disabled"])])]),_:1},8,["loading","disks","is-edit","onSubmit"]))])]),_:1},8,["show","onClose","onOpen"])}var Ze=F(Je,[["render",We]]);const ei={class:"inline-block"},ri={setup(t){const i=me("utils"),a=G(),e=j(),u=ne(),k=de(),{t:s}=A();let l=p(!1),d=p("");const c=S(()=>[{key:"name",label:s("settings.disk.disk_name"),thClass:"extra",tdClass:"font-medium text-gray-900"},{key:"driver",label:s("settings.disk.filesystem_driver"),thClass:"extra",tdClass:"font-medium text-gray-900"},{key:"type",label:s("settings.disk.disk_type"),thClass:"extra",tdClass:"font-medium text-gray-900"},{key:"set_as_default",label:s("settings.disk.is_default"),thClass:"extra",tdClass:"font-medium text-gray-900"},{key:"actions",label:"",tdClass:"text-right text-sm font-medium",sortable:!1}]),m=p(u.selectedCompanySettings.save_pdf_to_disk),o=S({get:()=>m.value==="YES",set:async C=>{const q=C?"YES":"NO";let x={settings:{save_pdf_to_disk:q}};m.value=q,await u.updateCompanySettings({data:x,message:"general.setting_updated"})}});async function B({page:C,filter:q,sort:x}){let J=L({orderByField:x.fieldName||"created_at",orderBy:x.order||"desc",page:C}),O=await e.fetchDisks(J);return{data:O.data.data,pagination:{totalPages:O.data.meta.last_page,currentPage:C,totalCount:O.data.meta.total}}}function M(C){return C.set_as_default?!(C.type=="SYSTEM"&&C.set_as_default):!0}function w(){a.openModal({title:s("settings.disk.new_disk"),componentName:"FileDiskModal",variant:"lg",refreshData:d.value&&d.value.refresh})}function I(C){a.openModal({title:s("settings.disk.edit_file_disk"),componentName:"FileDiskModal",variant:"lg",id:C.id,data:C,refreshData:d.value&&d.value.refresh})}function v(C){k.openDialog({title:s("general.are_you_sure"),message:s("settings.disk.set_default_disk_confirm"),yesLabel:s("general.ok"),noLabel:s("general.cancel"),variant:"primary",hideNoButton:!1,size:"lg"}).then(async q=>{if(q){l.value=!0;let x=L({set_as_default:!0,id:C});await e.updateDisk(x).then(()=>{d.value&&d.value.refresh()})}})}function $(C){k.openDialog({title:s("general.are_you_sure"),message:s("settings.disk.confirm_delete"),yesLabel:s("general.ok"),noLabel:s("general.cancel"),variant:"danger",hideNoButton:!1,size:"lg"}).then(async q=>{if(q&&(await e.deleteFileDisk(C)).data.success)return d.value&&d.value.refresh(),!0})}return(C,q)=>{const x=f("BaseIcon"),J=f("BaseButton"),O=f("BaseBadge"),H=f("BaseDropdownItem"),ee=f("BaseDropdown"),ie=f("BaseTable"),oe=f("BaseDivider"),ae=f("BaseSwitchSection"),te=f("BaseSettingCard");return y(),h(ge,null,[r(Ze),r(te,{title:C.$tc("settings.disk.title",1),description:C.$t("settings.disk.description")},{action:n(()=>[r(J,{variant:"primary-outline",onClick:w},{left:n(_=>[r(x,{class:ve(_.class),name:"PlusIcon"},null,8,["class"])]),default:n(()=>[U(" "+V(C.$t("settings.disk.new_disk")),1)]),_:1})]),default:n(()=>[r(ie,{ref:(_,T)=>{T.table=_,Z(d)?d.value=_:d=_},class:"mt-16",data:B,columns:P(c)},{"cell-set_as_default":n(({row:_})=>[r(O,{"bg-color":P(i).getBadgeStatusColor(_.data.set_as_default?"YES":"NO").bgColor,color:P(i).getBadgeStatusColor(_.data.set_as_default?"YES":"NO").color},{default:n(()=>[U(V(_.data.set_as_default?"Yes":"No".replace("_"," ")),1)]),_:2},1032,["bg-color","color"])]),"cell-actions":n(({row:_})=>[M(_.data)?(y(),N(ee,{key:0},{activator:n(()=>[b("div",ei,[r(x,{name:"DotsHorizontalIcon",class:"text-gray-500"})])]),default:n(()=>[_.data.set_as_default?E("",!0):(y(),N(H,{key:0,onClick:T=>v(_.data.id)},{default:n(()=>[r(x,{class:"mr-3 tetx-gray-600",name:"CheckCircleIcon"}),U(" "+V(C.$t("settings.disk.set_default_disk")),1)]),_:2},1032,["onClick"])),_.data.type!=="SYSTEM"?(y(),N(H,{key:1,onClick:T=>I(_.data)},{default:n(()=>[r(x,{name:"PencilIcon",class:"mr-3 text-gray-600"}),U(" "+V(C.$t("general.edit")),1)]),_:2},1032,["onClick"])):E("",!0),_.data.type!=="SYSTEM"&&!_.data.set_as_default?(y(),N(H,{key:2,onClick:T=>$(_.data.id)},{default:n(()=>[r(x,{name:"TrashIcon",class:"mr-3 text-gray-600"}),U(" "+V(C.$t("general.delete")),1)]),_:2},1032,["onClick"])):E("",!0)]),_:2},1024)):E("",!0)]),_:1},8,["columns"]),r(oe,{class:"mt-8 mb-2"}),r(ae,{modelValue:P(o),"onUpdate:modelValue":q[0]||(q[0]=_=>Z(o)?o.value=_:null),title:C.$t("settings.disk.save_pdf_to_disk"),description:C.$t("settings.disk.disk_setting_description")},null,8,["modelValue","title","description"])]),_:1},8,["title","description"])],64)}}};export{ri as default};
