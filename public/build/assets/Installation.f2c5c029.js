var $e=Object.defineProperty;var ue=Object.getOwnPropertySymbols;var we=Object.prototype.hasOwnProperty,he=Object.prototype.propertyIsEnumerable;var me=(n,q,d)=>q in n?$e(n,q,{enumerable:!0,configurable:!0,writable:!0,value:d}):n[q]=d,ce=(n,q)=>{for(var d in q||(q={}))we.call(q,d)&&me(n,d,q[d]);if(ue)for(var d of ue(q))he.call(q,d)&&me(n,d,q[d]);return n};import{a as L,d as ye,B as M,k as z,r as b,o as B,l as F,w as u,h as V,e as k,t as U,i as P,j as E,F as ne,y as ie,u as e,f as t,m as O,J as G,D as Q,q as oe,ag as re,a0 as j,ah as ee,L as I,M as D,aT as ae,T as W,U as T,aj as le,Q as H,x as Z,N as Ie,O as qe,P as Be,S as ge,aN as pe}from"./vendor.d12b5734.js";import{h as R,b as te,j as fe,_ as se,u as de,e as ve,d as _e,L as Ce}from"./main.465728e1.js";import{u as X}from"./mail-driver.0a974f6a.js";const A=(n=!1)=>{const q=n?window.pinia.defineStore:ye,d=te();return q({id:"installation",state:()=>({currentDataBaseData:{database_connection:"mysql",database_hostname:"127.0.0.1",database_port:"3306",database_name:null,database_username:null,database_password:null,app_url:window.location.origin}}),actions:{fetchInstallationRequirements(){return new Promise((r,i)=>{L.get("/api/v1/installation/requirements").then(g=>{r(g)}).catch(g=>{R(g),i(g)})})},fetchInstallationStep(){return new Promise((r,i)=>{L.get("/api/v1/installation/wizard-step").then(g=>{r(g)}).catch(g=>{R(g),i(g)})})},addInstallationStep(r){return new Promise((i,g)=>{L.post("/api/v1/installation/wizard-step",r).then(o=>{i(o)}).catch(o=>{R(o),g(o)})})},fetchInstallationPermissions(){return new Promise((r,i)=>{L.get("/api/v1/installation/permissions").then(g=>{r(g)}).catch(g=>{R(g),i(g)})})},fetchInstallationDatabase(r){return new Promise((i,g)=>{L.get("/api/v1/installation/database/config",{params:r}).then(o=>{i(o)}).catch(o=>{R(o),g(o)})})},addInstallationDatabase(r){return new Promise((i,g)=>{L.post("/api/v1/installation/database/config",r).then(o=>{i(o)}).catch(o=>{R(o),g(o)})})},addInstallationFinish(){return new Promise((r,i)=>{L.post("/api/v1/installation/finish").then(g=>{r(g)}).catch(g=>{R(g),i(g)})})},setInstallationDomain(r){return new Promise((i,g)=>{L.put("/api/v1/installation/set-domain",r).then(o=>{i(o)}).catch(o=>{R(o),g(o)})})},installationLogin(){return new Promise((r,i)=>{L.get("/sanctum/csrf-cookie").then(g=>{g&&L.post("/api/v1/installation/login").then(o=>{d.setSelectedCompany(o.data.company),r(o)}).catch(o=>{R(o),i(o)})})})},checkAutheticated(){return new Promise((r,i)=>{L.get("/api/v1/auth/check").then(g=>{r(g)}).catch(g=>{i(g)})})}}})()},Ve={class:"w-full md:w-2/3"},De={class:"mb-6"},Se={key:0,class:"grid grid-flow-row grid-cols-3 p-3 border border-gray-200 lg:gap-24 sm:gap-4"},Fe={class:"col-span-2 text-sm"},Me={class:"text-right"},ze={key:0,class:"inline-block w-4 h-4 ml-3 mr-2 bg-green-500 rounded-full"},ke={key:1,class:"inline-block w-4 h-4 ml-3 mr-2 bg-red-500 rounded-full"},Ue={key:1},Pe={class:"col-span-2 text-sm"},Ne={class:"text-right"},Ee={key:0,class:"inline-block w-4 h-4 ml-3 mr-2 bg-green-500 rounded-full"},Ge={key:1,class:"inline-block w-4 h-4 ml-3 mr-2 bg-red-500 rounded-full"},Oe={emits:["next"],setup(n,{emit:q}){const d=M(""),r=M(""),i=M(!1);M(!0);const g=A(),o=z(()=>{if(d.value){let m=!0;for(const s in d.value)return d.value[s]||(m=!1),d.value&&r.value.supported&&m}return!1});async function f(){var s,h,a,p;i.value=!0;const m=await g.fetchInstallationRequirements();m.data&&(d.value=(a=(h=(s=m==null?void 0:m.data)==null?void 0:s.requirements)==null?void 0:h.requirements)==null?void 0:a.php,r.value=(p=m==null?void 0:m.data)==null?void 0:p.phpSupportInfo)}function l(){i.value=!0,q("next"),i.value=!1}return(m,s)=>{const h=b("BaseIcon"),a=b("BaseButton"),p=b("BaseWizardStep");return B(),F(p,{title:m.$t("wizard.req.system_req"),description:m.$t("wizard.req.system_req_desc")},{default:u(()=>[V("div",Ve,[V("div",De,[r.value?(B(),k("div",Se,[V("div",Fe,U(m.$t("wizard.req.php_req_version",{version:r.value.minimum})),1),V("div",Me,[P(U(r.value.current)+" ",1),r.value.supported?(B(),k("span",ze)):(B(),k("span",ke))])])):E("",!0),d.value?(B(),k("div",Ue,[(B(!0),k(ne,null,ie(d.value,($,C)=>(B(),k("div",{key:C,class:"grid grid-flow-row grid-cols-3 p-3 border border-gray-200 lg:gap-24 sm:gap-4"},[V("div",Pe,U(C),1),V("div",Ne,[$?(B(),k("span",Ee)):(B(),k("span",Ge))])]))),128))])):E("",!0)]),e(o)?(B(),F(a,{key:0,onClick:l},{left:u($=>[t(h,{name:"ArrowRightIcon",class:O($.class)},null,8,["class"])]),default:u(()=>[P(U(m.$t("wizard.continue"))+" ",1)]),_:1})):E("",!0),d.value?E("",!0):(B(),F(a,{key:1,loading:i.value,disabled:i.value,onClick:f},{default:u(()=>[P(U(m.$t("wizard.req.check_req")),1)]),_:1},8,["loading","disabled"]))])]),_:1},8,["title","description"])}}},xe={key:1,class:"relative"},Le={class:"grid grid-flow-row grid-cols-3 lg:gap-24 sm:gap-4"},We={class:"col-span-2 p-3"},Te={class:"p-3 text-right"},je={key:0,class:"inline-block w-4 h-4 ml-3 mr-2 rounded-full bg-green-500"},Re={key:1,class:"inline-block w-4 h-4 ml-3 mr-2 rounded-full bg-red-500"},Ae={emits:["next"],setup(n,{emit:q}){let d=M(!1),r=M(!1),i=M([]);const{tm:g,t:o}=G(),f=A(),l=fe();Q(()=>{m()});async function m(){d.value=!0;const h=await f.fetchInstallationPermissions();i.value=h.data.permissions.permissions,h.data&&h.data.permissions.errors&&setTimeout(()=>{l.openDialog({title:g("wizard.permissions.permission_confirm_title"),message:o("wizard.permissions.permission_confirm_desc"),yesLabel:"OK",noLabel:"Cancel",variant:"danger",hideNoButton:!1,size:"lg"}).then(a=>{a.data&&(d.value=!1)})},500),d.value=!1}function s(){r.value=!0,q("next"),r.value=!1}return(h,a)=>{const p=b("BaseContentPlaceholdersText"),$=b("BaseContentPlaceholdersBox"),C=b("BaseContentPlaceholders"),c=b("BaseIcon"),_=b("BaseButton"),v=b("BaseWizardStep");return B(),F(v,{title:h.$t("wizard.permissions.permissions"),description:h.$t("wizard.permissions.permission_desc")},{default:u(()=>[e(d)?(B(),F(C,{key:0},{default:u(()=>[(B(),k(ne,null,ie(3,(w,y)=>V("div",{key:y,class:"grid grid-flow-row grid-cols-3 lg:gap-24 sm:gap-4 border border-gray-200"},[t(p,{lines:1,class:"col-span-4 p-3"})])),64)),t($,{rounded:!0,class:"mt-10",style:{width:"96px",height:"42px"}})]),_:1})):(B(),k("div",xe,[(B(!0),k(ne,null,ie(e(i),(w,y)=>(B(),k("div",{key:y,class:"border border-gray-200"},[V("div",Le,[V("div",We,U(w.folder),1),V("div",Te,[w.isSet?(B(),k("span",je)):(B(),k("span",Re)),V("span",null,U(w.permission),1)])])]))),128)),oe(t(_,{class:"mt-10",loading:e(r),disabled:e(r),onClick:s},{left:u(w=>[t(c,{name:"ArrowRightIcon",class:O(w.class)},null,8,["class"])]),default:u(()=>[P(" "+U(h.$t("wizard.continue")),1)]),_:1},8,["loading","disabled"]),[[re,!e(d)]])]))]),_:1},8,["title","description"])}}},Ye=["onSubmit"],Je={class:"grid grid-cols-1 gap-5 md:grid-cols-2 lg:mb-6 md:mb-6"},Ze={props:{configData:{type:Object,require:!0,default:Object},isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,default:!1}},emits:["submit-data","on-change-driver"],setup(n,{emit:q}){const d=n,r=j(["sqlite","mysql","pgsql"]),{t:i}=G(),g=ee("utils"),o=A();Q(()=>{for(const p in f.value)d.configData.hasOwnProperty(p)&&(f.value[p]=d.configData[p])});const f=z(()=>o.currentDataBaseData),l=p=>g.checkValidUrl(p),m={database_connection:{required:I.withMessage(i("validation.required"),D)},database_hostname:{required:I.withMessage(i("validation.required"),D)},database_port:{required:I.withMessage(i("validation.required"),D),numeric:ae},database_name:{required:I.withMessage(i("validation.required"),D)},database_username:{required:I.withMessage(i("validation.required"),D)},app_url:{required:I.withMessage(i("validation.required"),D),isUrl:I.withMessage(i("validation.invalid_url"),l)}},s=W(m,f.value);function h(){if(s.value.$touch(),s.value.$invalid)return!0;q("submit-data",f.value)}function a(){s.value.database_connection.$touch(),q("on-change-driver",f.value.database_connection)}return(p,$)=>{const C=b("BaseInput"),c=b("BaseInputGroup"),_=b("BaseMultiselect"),v=b("BaseIcon"),w=b("BaseButton");return B(),k("form",{action:"",onSubmit:T(h,["prevent"])},[V("div",Je,[t(c,{label:p.$t("wizard.database.app_url"),error:e(s).app_url.$error&&e(s).app_url.$errors[0].$message,required:""},{default:u(()=>[t(C,{modelValue:e(f).app_url,"onUpdate:modelValue":$[0]||($[0]=y=>e(f).app_url=y),invalid:e(s).app_url.$error,type:"text"},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),t(c,{label:p.$t("wizard.database.connection"),error:e(s).database_connection.$error&&e(s).database_connection.$errors[0].$message,required:""},{default:u(()=>[t(_,{modelValue:e(f).database_connection,"onUpdate:modelValue":[$[1]||($[1]=y=>e(f).database_connection=y),a],invalid:e(s).database_connection.$error,options:e(r),"can-deselect":!1,"can-clear":!1},null,8,["modelValue","invalid","options"])]),_:1},8,["label","error"]),t(c,{label:p.$t("wizard.database.port"),error:e(s).database_port.$error&&e(s).database_port.$errors[0].$message,required:""},{default:u(()=>[t(C,{modelValue:e(f).database_port,"onUpdate:modelValue":$[2]||($[2]=y=>e(f).database_port=y),invalid:e(s).database_port.$error},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),t(c,{label:p.$t("wizard.database.db_name"),error:e(s).database_name.$error&&e(s).database_name.$errors[0].$message,required:""},{default:u(()=>[t(C,{modelValue:e(f).database_name,"onUpdate:modelValue":$[3]||($[3]=y=>e(f).database_name=y),invalid:e(s).database_name.$error},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),t(c,{label:p.$t("wizard.database.username"),error:e(s).database_username.$error&&e(s).database_username.$errors[0].$message,required:""},{default:u(()=>[t(C,{modelValue:e(f).database_username,"onUpdate:modelValue":$[4]||($[4]=y=>e(f).database_username=y),invalid:e(s).database_username.$error},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),t(c,{label:p.$t("wizard.database.password")},{default:u(()=>[t(C,{modelValue:e(f).database_password,"onUpdate:modelValue":$[5]||($[5]=y=>e(f).database_password=y),type:"password"},null,8,["modelValue"])]),_:1},8,["label"]),t(c,{label:p.$t("wizard.database.host"),error:e(s).database_hostname.$error&&e(s).database_hostname.$errors[0].$message,required:""},{default:u(()=>[t(C,{modelValue:e(f).database_hostname,"onUpdate:modelValue":$[6]||($[6]=y=>e(f).database_hostname=y),invalid:e(s).database_hostname.$error},null,8,["modelValue","invalid"])]),_:1},8,["label","error"])]),t(w,{type:"submit",class:"mt-4",loading:n.isSaving,disabled:n.isSaving},{left:u(y=>[n.isSaving?E("",!0):(B(),F(v,{key:0,name:"SaveIcon",class:O(y.class)},null,8,["class"]))]),default:u(()=>[P(" "+U(p.$t("wizard.save_cont")),1)]),_:1},8,["loading","disabled"])],40,Ye)}}},Ke=["onSubmit"],Qe={class:"grid grid-cols-1 gap-5 md:grid-cols-2 lg:mb-6 md:mb-6"},He={props:{configData:{type:Object,require:!0,default:Object},isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1}},emits:["submit-data","on-change-driver"],setup(n,{emit:q}){const d=n,r=j(["sqlite","mysql","pgsql"]),{t:i}=G(),g=ee("utils"),o=A(),f=z(()=>o.currentDataBaseData);Q(()=>{for(const p in f.value)d.configData.hasOwnProperty(p)&&(f.value[p]=d.configData[p])});const l=p=>g.checkValidUrl(p),m={database_connection:{required:I.withMessage(i("validation.required"),D)},database_hostname:{required:I.withMessage(i("validation.required"),D)},database_port:{required:I.withMessage(i("validation.required"),D),numeric:ae},database_name:{required:I.withMessage(i("validation.required"),D)},database_username:{required:I.withMessage(i("validation.required"),D)},app_url:{required:I.withMessage(i("validation.required"),D),isUrl:I.withMessage(i("validation.invalid_url"),l)}},s=W(m,f.value);function h(){if(s.value.$touch(),s.value.$invalid)return!0;q("submit-data",f.value)}function a(){s.value.database_connection.$touch(),q("on-change-driver",f.value.database_connection)}return(p,$)=>{const C=b("BaseInput"),c=b("BaseInputGroup"),_=b("BaseMultiselect"),v=b("BaseIcon"),w=b("BaseButton");return B(),k("form",{action:"",onSubmit:T(h,["prevent"])},[V("div",Qe,[t(c,{label:p.$t("wizard.database.app_url"),"content-loading":n.isFetchingInitialData,error:e(s).app_url.$error&&e(s).app_url.$errors[0].$message,required:""},{default:u(()=>[t(C,{modelValue:e(f).app_url,"onUpdate:modelValue":$[0]||($[0]=y=>e(f).app_url=y),"content-loading":n.isFetchingInitialData,invalid:e(s).app_url.$error,type:"text"},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),t(c,{label:p.$t("wizard.database.connection"),"content-loading":n.isFetchingInitialData,error:e(s).database_connection.$error&&e(s).database_connection.$errors[0].$message,required:""},{default:u(()=>[t(_,{modelValue:e(f).database_connection,"onUpdate:modelValue":[$[1]||($[1]=y=>e(f).database_connection=y),a],"content-loading":n.isFetchingInitialData,invalid:e(s).database_connection.$error,options:e(r),"can-deselect":!1,"can-clear":!1},null,8,["modelValue","content-loading","invalid","options"])]),_:1},8,["label","content-loading","error"]),t(c,{label:p.$t("wizard.database.port"),"content-loading":n.isFetchingInitialData,error:e(s).database_port.$error&&e(s).database_port.$errors[0].$message,required:""},{default:u(()=>[t(C,{modelValue:e(f).database_port,"onUpdate:modelValue":$[2]||($[2]=y=>e(f).database_port=y),"content-loading":n.isFetchingInitialData,invalid:e(s).database_port.$error},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),t(c,{label:p.$t("wizard.database.db_name"),"content-loading":n.isFetchingInitialData,error:e(s).database_name.$error&&e(s).database_name.$errors[0].$message,required:""},{default:u(()=>[t(C,{modelValue:e(f).database_name,"onUpdate:modelValue":$[3]||($[3]=y=>e(f).database_name=y),"content-loading":n.isFetchingInitialData,invalid:e(s).database_name.$error},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),t(c,{label:p.$t("wizard.database.username"),"content-loading":n.isFetchingInitialData,error:e(s).database_username.$error&&e(s).database_username.$errors[0].$message,required:""},{default:u(()=>[t(C,{modelValue:e(f).database_username,"onUpdate:modelValue":$[4]||($[4]=y=>e(f).database_username=y),"content-loading":n.isFetchingInitialData,invalid:e(s).database_username.$error},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),t(c,{"content-loading":n.isFetchingInitialData,label:p.$t("wizard.database.password")},{default:u(()=>[t(C,{modelValue:e(f).database_password,"onUpdate:modelValue":$[5]||($[5]=y=>e(f).database_password=y),"content-loading":n.isFetchingInitialData,type:"password"},null,8,["modelValue","content-loading"])]),_:1},8,["content-loading","label"]),t(c,{label:p.$t("wizard.database.host"),"content-loading":n.isFetchingInitialData,error:e(s).database_hostname.$error&&e(s).database_hostname.$errors[0].$message,required:""},{default:u(()=>[t(C,{modelValue:e(f).database_hostname,"onUpdate:modelValue":$[6]||($[6]=y=>e(f).database_hostname=y),"content-loading":n.isFetchingInitialData,invalid:e(s).database_hostname.$error},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"])]),oe(t(w,{"content-loading":n.isFetchingInitialData,type:"submit",class:"mt-4",loading:n.isSaving,disabled:n.isSaving},{left:u(y=>[n.isSaving?E("",!0):(B(),F(v,{key:0,name:"SaveIcon",class:O(y.class)},null,8,["class"]))]),default:u(()=>[P(" "+U(p.$t("wizard.save_cont")),1)]),_:1},8,["content-loading","loading","disabled"]),[[re,!n.isFetchingInitialData]])],40,Ke)}}},Xe=["onSubmit"],ea={class:"grid grid-cols-1 gap-5 md:grid-cols-2 lg:mb-6 md:mb-6"},aa={props:{configData:{type:Object,require:!0,default:Object},isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1}},emits:["submit-data","on-change-driver"],setup(n,{emit:q}){const d=n,r=j(["sqlite","mysql","pgsql"]),{t:i}=G(),g=ee("utils"),o=A(),f=z(()=>o.currentDataBaseData);Q(()=>{for(const p in f.value)d.configData.hasOwnProperty(p)&&(f.value[p]=d.configData[p])});const l=p=>g.checkValidUrl(p),m={database_connection:{required:I.withMessage(i("validation.required"),D)},database_name:{required:I.withMessage(i("validation.required"),D)},app_url:{required:I.withMessage(i("validation.required"),D),isUrl:I.withMessage(i("validation.invalid_url"),l)}},s=W(m,f.value);function h(){if(s.value.$touch(),s.value.$invalid)return!0;q("submit-data",f.value)}function a(){s.value.database_connection.$touch(),q("on-change-driver",f.value.database_connection)}return(p,$)=>{const C=b("BaseInput"),c=b("BaseInputGroup"),_=b("BaseMultiselect"),v=b("BaseIcon"),w=b("BaseButton");return B(),k("form",{action:"",onSubmit:T(h,["prevent"])},[V("div",ea,[t(c,{label:p.$t("wizard.database.app_url"),"content-loading":n.isFetchingInitialData,error:e(s).app_url.$error&&e(s).app_url.$errors[0].$message,required:""},{default:u(()=>[t(C,{modelValue:e(f).app_url,"onUpdate:modelValue":$[0]||($[0]=y=>e(f).app_url=y),"content-loading":n.isFetchingInitialData,invalid:e(s).app_url.$error,type:"text"},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),t(c,{label:p.$t("wizard.database.connection"),"content-loading":n.isFetchingInitialData,error:e(s).database_connection.$error&&e(s).database_connection.$errors[0].$message,required:""},{default:u(()=>[t(_,{modelValue:e(f).database_connection,"onUpdate:modelValue":[$[1]||($[1]=y=>e(f).database_connection=y),a],"content-loading":n.isFetchingInitialData,invalid:e(s).database_connection.$error,options:e(r),"can-deselect":!1,"can-clear":!1},null,8,["modelValue","content-loading","invalid","options"])]),_:1},8,["label","content-loading","error"]),t(c,{label:p.$t("wizard.database.db_path"),error:e(s).database_name.$error&&e(s).database_name.$errors[0].$message,"content-loading":n.isFetchingInitialData,required:""},{default:u(()=>[t(C,{modelValue:e(f).database_name,"onUpdate:modelValue":$[2]||($[2]=y=>e(f).database_name=y),"content-loading":n.isFetchingInitialData,invalid:e(s).database_name.$error},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","error","content-loading"])]),oe(t(w,{"content-loading":n.isFetchingInitialData,type:"submit",class:"mt-4",loading:n.isSaving,disabled:n.isSaving},{left:u(y=>[n.isSaving?E("",!0):(B(),F(v,{key:0,name:"SaveIcon",class:O(y.class)},null,8,["class"]))]),default:u(()=>[P(" "+U(p.$t("wizard.save_cont")),1)]),_:1},8,["content-loading","loading","disabled"]),[[re,!n.isFetchingInitialData]])],40,Xe)}}},ta={components:{Mysql:Ze,Pgsql:He,Sqlite:aa},emits:["next"],setup(n,{emit:q}){const d=M("mysql"),r=M(!1),{t:i}=G(),g=de(),o=A(),f=z(()=>o.currentDataBaseData);async function l(s){let h={connection:s};const a=await o.fetchInstallationDatabase(h);a.data.success&&(f.value.database_connection=a.data.config.database_connection),s==="sqlite"?f.value.database_name=a.data.config.database_name:f.value.database_name=null}async function m(s){r.value=!0;try{let h=await o.addInstallationDatabase(s);if(r.value=!1,h.data.success){await o.addInstallationFinish(),q("next",3),g.showNotification({type:"success",message:i("wizard.success."+h.data.success)});return}else if(h.data.error){if(h.data.requirement){g.showNotification({type:"error",message:i("wizard.errors."+h.data.error,{version:h.data.requirement.minimum,name:s.value.database_connection})});return}g.showNotification({type:"error",message:i("wizard.errors."+h.data.error)})}else h.data.errors?g.showNotification({type:"error",message:h.data.errors[0]}):h.data.error_message&&g.showNotification({type:"error",message:h.data.error_message})}catch{g.showNotification({type:"error",message:i("validation.something_went_wrong")}),r.value=!1}finally{r.value=!1}}return{databaseData:f,database_connection:d,isSaving:r,getDatabaseConfig:l,next:m}}};function na(n,q,d,r,i,g){const o=b("BaseWizardStep");return B(),F(o,{title:n.$t("wizard.database.database"),description:n.$t("wizard.database.desc"),"step-container":"w-full p-8 mb-8 bg-white border border-gray-200 border-solid rounded md:w-full"},{default:u(()=>[(B(),F(le(r.databaseData.database_connection),{"config-data":r.databaseData,"is-saving":r.isSaving,onOnChangeDriver:r.getDatabaseConfig,onSubmitData:r.next},null,8,["config-data","is-saving","onOnChangeDriver","onSubmitData"]))]),_:1},8,["title","description"])}var ia=se(ta,[["render",na]]);const oa={class:"w-full md:w-2/3"},ra=V("p",{class:"mt-4 mb-0 text-sm text-gray-600"},"Notes:",-1),la=V("ul",{class:"w-full text-gray-600 list-disc list-inside"},[V("li",{class:"text-sm leading-8"},[P(" App domain should not contain "),V("b",{class:"inline-block px-1 bg-gray-100 rounded-sm"},"https://"),P(" or "),V("b",{class:"inline-block px-1 bg-gray-100 rounded-sm"},"http"),P(" in front of the domain. ")]),V("li",{class:"text-sm leading-8"},[P(" If you're accessing the website on a different port, please mention the port. For example: "),V("b",{class:"inline-block px-1 bg-gray-100"},"localhost:8080")])],-1),sa={emits:["next"],setup(n,{emit:q}){const d=j({app_domain:window.location.origin.replace(/(^\w+:|^)\/\//,"")}),r=M(!1),{t:i}=G(),g=ee("utils"),o=a=>g.checkValidDomainUrl(a),f=A(),l=de(),m={app_domain:{required:I.withMessage(i("validation.required"),D),isUrl:I.withMessage(i("validation.invalid_domain_url"),o)}},s=W(m,z(()=>d));async function h(){if(s.value.$touch(),s.value.$invalid)return!0;r.value=!0;try{await f.setInstallationDomain(d),await f.installationLogin(),(await f.checkAutheticated()).data&&q("next",4),r.value=!1}catch{l.showNotification({type:"error",message:i("wizard.verify_domain.failed")}),r.value=!1}}return(a,p)=>{const $=b("BaseInput"),C=b("BaseInputGroup"),c=b("BaseButton"),_=b("BaseWizardStep");return B(),F(_,{title:a.$t("wizard.verify_domain.title"),description:a.$t("wizard.verify_domain.desc")},{default:u(()=>[V("div",oa,[t(C,{label:a.$t("wizard.verify_domain.app_domain"),error:e(s).app_domain.$error&&e(s).app_domain.$errors[0].$message,required:""},{default:u(()=>[t($,{modelValue:e(d).app_domain,"onUpdate:modelValue":p[0]||(p[0]=v=>e(d).app_domain=v),invalid:e(s).app_domain.$error,type:"text",onInput:p[1]||(p[1]=v=>e(s).app_domain.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"])]),ra,la,t(c,{loading:r.value,disabled:r.value,class:"mt-8",onClick:h},{default:u(()=>[P(U(a.$t("wizard.verify_domain.verify_now")),1)]),_:1},8,["loading","disabled"])]),_:1},8,["title","description"])}}},da=["onSubmit"],ua={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},ma={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},ca={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},ga={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},pa={props:{isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1}},emits:["submit-data","on-change-driver"],setup(n,{emit:q}){let d=M(!1);const r=j(["tls","ssl","starttls"]),{t:i}=G(),g=X(),o=z(()=>g.smtpConfig),f=z(()=>d.value?"text":"password");o.value.mail_driver="smtp";const l=z(()=>({smtpConfig:{mail_driver:{required:I.withMessage(i("validation.required"),D)},mail_host:{required:I.withMessage(i("validation.required"),D)},mail_port:{required:I.withMessage(i("validation.required"),D),numeric:I.withMessage(i("validation.numbers_only"),ae)},mail_encryption:{required:I.withMessage(i("validation.required"),D)},from_mail:{required:I.withMessage(i("validation.required"),D),email:I.withMessage(i("validation.email_incorrect"),H)},from_name:{required:I.withMessage(i("validation.required"),D)}}})),m=W(l,z(()=>g));async function s(){return m.value.$touch(),m.value.$invalid||q("submit-data",g.smtpConfig),!1}function h(){m.value.smtpConfig.mail_driver.$touch(),q("on-change-driver",g.smtpConfig.mail_driver)}return(a,p)=>{const $=b("BaseMultiselect"),C=b("BaseInputGroup"),c=b("BaseInput"),_=b("BaseIcon"),v=b("BaseButton");return B(),k("form",{onSubmit:T(s,["prevent"])},[V("div",ua,[t(C,{label:a.$t("wizard.mail.driver"),"content-loading":n.isFetchingInitialData,error:e(m).smtpConfig.mail_driver.$error&&e(m).smtpConfig.mail_driver.$errors[0].$message,required:""},{default:u(()=>[t($,{modelValue:e(o).mail_driver,"onUpdate:modelValue":[p[0]||(p[0]=w=>e(o).mail_driver=w),h],options:e(g).mail_drivers,"can-deselect":!1,"content-loading":n.isFetchingInitialData,invalid:e(m).smtpConfig.mail_driver.$error},null,8,["modelValue","options","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),t(C,{label:a.$t("wizard.mail.host"),"content-loading":n.isFetchingInitialData,error:e(m).smtpConfig.mail_host.$error&&e(m).smtpConfig.mail_host.$errors[0].$message,required:""},{default:u(()=>[t(c,{modelValue:e(o).mail_host,"onUpdate:modelValue":p[1]||(p[1]=w=>e(o).mail_host=w),modelModifiers:{trim:!0},invalid:e(m).smtpConfig.mail_host.$error,"content-loading":n.isFetchingInitialData,type:"text",name:"mail_host",onInput:p[2]||(p[2]=w=>e(m).smtpConfig.mail_host.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),V("div",ma,[t(C,{label:a.$t("wizard.mail.username"),"content-loading":n.isFetchingInitialData},{default:u(()=>[t(c,{modelValue:e(o).mail_username,"onUpdate:modelValue":p[3]||(p[3]=w=>e(o).mail_username=w),modelModifiers:{trim:!0},"content-loading":n.isFetchingInitialData,type:"text",name:"db_name"},null,8,["modelValue","content-loading"])]),_:1},8,["label","content-loading"]),t(C,{label:a.$t("wizard.mail.password"),"content-loading":n.isFetchingInitialData},{default:u(()=>[t(c,{modelValue:e(o).mail_password,"onUpdate:modelValue":p[6]||(p[6]=w=>e(o).mail_password=w),modelModifiers:{trim:!0},type:e(f),"content-loading":n.isFetchingInitialData,autocomplete:"off","data-lpignore":"true",name:"password"},{right:u(()=>[e(d)?(B(),F(_,{key:0,name:"EyeOffIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:p[4]||(p[4]=w=>Z(d)?d.value=!e(d):d=!e(d))})):(B(),F(_,{key:1,name:"EyeIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:p[5]||(p[5]=w=>Z(d)?d.value=!e(d):d=!e(d))}))]),_:1},8,["modelValue","type","content-loading"])]),_:1},8,["label","content-loading"])]),V("div",ca,[t(C,{label:a.$t("wizard.mail.port"),error:e(m).smtpConfig.mail_port.$error&&e(m).smtpConfig.mail_port.$errors[0].$message,"content-loading":n.isFetchingInitialData,required:""},{default:u(()=>[t(c,{modelValue:e(o).mail_port,"onUpdate:modelValue":p[7]||(p[7]=w=>e(o).mail_port=w),modelModifiers:{trim:!0},invalid:e(m).smtpConfig.mail_port.$error,"content-loading":n.isFetchingInitialData,type:"text",name:"mail_port",onInput:p[8]||(p[8]=w=>e(m).smtpConfig.mail_port.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","error","content-loading"]),t(C,{label:a.$t("wizard.mail.encryption"),error:e(m).smtpConfig.mail_encryption.$error&&e(m).smtpConfig.mail_encryption.$errors[0].$message,"content-loading":n.isFetchingInitialData,required:""},{default:u(()=>[t($,{modelValue:e(o).mail_encryption,"onUpdate:modelValue":p[9]||(p[9]=w=>e(o).mail_encryption=w),modelModifiers:{trim:!0},options:e(r),"can-deselect":!1,invalid:e(m).smtpConfig.mail_encryption.$error,"content-loading":n.isFetchingInitialData,onInput:p[10]||(p[10]=w=>e(m).smtpConfig.mail_encryption.$touch())},null,8,["modelValue","options","invalid","content-loading"])]),_:1},8,["label","error","content-loading"])]),V("div",ga,[t(C,{label:a.$t("wizard.mail.from_mail"),error:e(m).smtpConfig.from_mail.$error&&e(m).smtpConfig.from_mail.$errors[0].$message,"content-loading":n.isFetchingInitialData,required:""},{default:u(()=>[t(c,{modelValue:e(o).from_mail,"onUpdate:modelValue":p[11]||(p[11]=w=>e(o).from_mail=w),modelModifiers:{trim:!0},invalid:e(m).smtpConfig.from_mail.$error,"content-loading":n.isFetchingInitialData,type:"text",name:"from_mail",onInput:p[12]||(p[12]=w=>e(m).smtpConfig.from_mail.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","error","content-loading"]),t(C,{label:a.$t("wizard.mail.from_name"),error:e(m).smtpConfig.from_name.$error&&e(m).smtpConfig.from_name.$errors[0].$message,"content-loading":n.isFetchingInitialData,required:""},{default:u(()=>[t(c,{modelValue:e(o).from_name,"onUpdate:modelValue":p[13]||(p[13]=w=>e(o).from_name=w),modelModifiers:{trim:!0},invalid:e(m).smtpConfig.from_name.$error,"content-loading":n.isFetchingInitialData,type:"text",name:"from_name",onInput:p[14]||(p[14]=w=>e(m).smtpConfig.from_name.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","error","content-loading"])]),t(v,{loading:n.isSaving,disabled:n.isSaving,"content-loading":n.isFetchingInitialData,class:"mt-4"},{left:u(w=>[n.isSaving?E("",!0):(B(),F(_,{key:0,name:"SaveIcon",class:O(w.class)},null,8,["class"]))]),default:u(()=>[P(" "+U(a.$t("general.save")),1)]),_:1},8,["loading","disabled","content-loading"])],40,da)}}},fa=["onSubmit"],va={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 lg:mb-6 md:mb-6"},_a={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 lg:mb-6 md:mb-6"},ba={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},$a={props:{isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1}},emits:["submit-data","on-change-driver"],setup(n,{emit:q}){let d=M(!1);const r=X(),{t:i}=G(),g=z(()=>r.mailgunConfig),o=z(()=>d.value?"text":"password");g.value.mail_driver="mailgun";const f=z(()=>({mailgunConfig:{mail_driver:{required:I.withMessage(i("validation.required"),D)},mail_mailgun_domain:{required:I.withMessage(i("validation.required"),D)},mail_mailgun_endpoint:{required:I.withMessage(i("validation.required"),D)},mail_mailgun_secret:{required:I.withMessage(i("validation.required"),D)},from_mail:{required:I.withMessage(i("validation.required"),D),email:H},from_name:{required:I.withMessage(i("validation.required"),D)}}})),l=W(f,z(()=>r));function m(){return l.value.$touch(),l.value.$invalid||q("submit-data",r.mailgunConfig),!1}function s(){l.value.mailgunConfig.mail_driver.$touch(),q("on-change-driver",r.mailgunConfig.mail_driver)}return(h,a)=>{const p=b("BaseMultiselect"),$=b("BaseInputGroup"),C=b("BaseInput"),c=b("BaseIcon"),_=b("BaseButton");return B(),k("form",{onSubmit:T(m,["prevent"])},[V("div",va,[t($,{label:h.$t("wizard.mail.driver"),"content-loading":n.isFetchingInitialData,error:e(l).mailgunConfig.mail_driver.$error&&e(l).mailgunConfig.mail_driver.$errors[0].$message,required:""},{default:u(()=>[t(p,{modelValue:e(g).mail_driver,"onUpdate:modelValue":[a[0]||(a[0]=v=>e(g).mail_driver=v),s],options:e(r).mail_drivers,"can-deselect":!1,invalid:e(l).mailgunConfig.mail_driver.$error,"content-loading":n.isFetchingInitialData},null,8,["modelValue","options","invalid","content-loading"])]),_:1},8,["label","content-loading","error"]),t($,{label:h.$t("wizard.mail.mailgun_domain"),"content-loading":n.isFetchingInitialData,error:e(l).mailgunConfig.mail_mailgun_domain.$error&&e(l).mailgunConfig.mail_mailgun_domain.$errors[0].$message,required:""},{default:u(()=>[t(C,{modelValue:e(g).mail_mailgun_domain,"onUpdate:modelValue":a[1]||(a[1]=v=>e(g).mail_mailgun_domain=v),modelModifiers:{trim:!0},invalid:e(l).mailgunConfig.mail_mailgun_domain.$error,"content-loading":n.isFetchingInitialData,type:"text",name:"mailgun_domain",onInput:a[2]||(a[2]=v=>e(l).mailgunConfig.mail_mailgun_domain.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),V("div",_a,[t($,{label:h.$t("wizard.mail.mailgun_secret"),"content-loading":n.isFetchingInitialData,error:e(l).mailgunConfig.mail_mailgun_secret.$error&&e(l).mailgunConfig.mail_mailgun_secret.$errors[0].$message,required:""},{default:u(()=>[t(C,{modelValue:e(g).mail_mailgun_secret,"onUpdate:modelValue":a[5]||(a[5]=v=>e(g).mail_mailgun_secret=v),modelModifiers:{trim:!0},invalid:e(l).mailgunConfig.mail_mailgun_secret.$error,type:e(o),"content-loading":n.isFetchingInitialData,name:"mailgun_secret",autocomplete:"off","data-lpignore":"true",onInput:a[6]||(a[6]=v=>e(l).mailgunConfig.mail_mailgun_secret.$touch())},{right:u(()=>[e(d)?(B(),F(c,{key:0,name:"EyeOffIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:a[3]||(a[3]=v=>Z(d)?d.value=!e(d):d=!e(d))})):(B(),F(c,{key:1,name:"EyeIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:a[4]||(a[4]=v=>Z(d)?d.value=!e(d):d=!e(d))}))]),_:1},8,["modelValue","invalid","type","content-loading"])]),_:1},8,["label","content-loading","error"]),t($,{label:h.$t("wizard.mail.mailgun_endpoint"),"content-loading":n.isFetchingInitialData,error:e(l).mailgunConfig.mail_mailgun_endpoint.$error&&e(l).mailgunConfig.mail_mailgun_endpoint.$errors[0].$message,required:""},{default:u(()=>[t(C,{modelValue:e(g).mail_mailgun_endpoint,"onUpdate:modelValue":a[7]||(a[7]=v=>e(g).mail_mailgun_endpoint=v),modelModifiers:{trim:!0},invalid:e(l).mailgunConfig.mail_mailgun_endpoint.$error,"content-loading":n.isFetchingInitialData,type:"text",name:"mailgun_endpoint",onInput:a[8]||(a[8]=v=>e(l).mailgunConfig.mail_mailgun_endpoint.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),V("div",ba,[t($,{label:h.$t("wizard.mail.from_mail"),"content-loading":n.isFetchingInitialData,error:e(l).mailgunConfig.from_mail.$error&&e(l).mailgunConfig.from_mail.$errors[0].$message,required:""},{default:u(()=>[t(C,{modelValue:e(g).from_mail,"onUpdate:modelValue":a[9]||(a[9]=v=>e(g).from_mail=v),modelModifiers:{trim:!0},name:"from_mail",type:"text",invalid:e(l).mailgunConfig.from_mail.$error,"content-loading":n.isFetchingInitialData,onInput:a[10]||(a[10]=v=>e(l).mailgunConfig.from_mail.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"]),t($,{label:h.$t("wizard.mail.from_name"),"content-loading":n.isFetchingInitialData,error:e(l).mailgunConfig.from_name.$error&&e(l).mailgunConfig.from_name.$errors[0].$message,required:""},{default:u(()=>[t(C,{modelValue:e(g).from_name,"onUpdate:modelValue":a[11]||(a[11]=v=>e(g).from_name=v),modelModifiers:{trim:!0},invalid:e(l).mailgunConfig.from_name.$error,"content-loading":n.isFetchingInitialData,type:"text",name:"from_name",onInput:a[12]||(a[12]=v=>e(l).mailgunConfig.from_name.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),t(_,{loading:h.loading,disabled:n.isSaving,"content-loading":n.isFetchingInitialData,class:"mt-4"},{left:u(v=>[n.isSaving?E("",!0):(B(),F(c,{key:0,name:"SaveIcon",class:O(v.class)},null,8,["class"]))]),default:u(()=>[P(" "+U(h.$t("general.save")),1)]),_:1},8,["loading","disabled","content-loading"])],40,fa)}}},wa=["onSubmit"],ha={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},ya={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},Ia={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},qa={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},Ba={props:{isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1}},emits:["submit-data","on-change-driver"],setup(n,{emit:q}){const{t:d}=G(),r=j(["tls","ssl","starttls"]);let i=M(!1);const g=X(),o=z(()=>g.sesConfig);o.value.mail_driver="ses";const f=z(()=>({sesConfig:{mail_driver:{required:I.withMessage(d("validation.required"),D)},mail_host:{required:I.withMessage(d("validation.required"),D)},mail_port:{required:I.withMessage(d("validation.required"),D),numeric:ae},mail_ses_key:{required:I.withMessage(d("validation.required"),D)},mail_ses_secret:{required:I.withMessage(d("validation.required"),D)},mail_encryption:{required:I.withMessage(d("validation.required"),D)},from_mail:{required:I.withMessage(d("validation.required"),D),email:I.withMessage(d("validation.email_incorrect"),H)},from_name:{required:I.withMessage(d("validation.required"),D)}}})),l=W(f,z(()=>g));async function m(){return l.value.$touch(),l.value.$invalid||q("submit-data",g.sesConfig),!1}function s(){l.value.sesConfig.mail_driver.$touch(),q("on-change-driver",g.sesConfig.mail_driver)}return(h,a)=>{const p=b("BaseMultiselect"),$=b("BaseInputGroup"),C=b("BaseInput"),c=b("BaseIcon"),_=b("BaseButton");return B(),k("form",{onSubmit:T(m,["prevent"])},[V("div",ha,[t($,{label:h.$t("wizard.mail.driver"),"content-loading":n.isFetchingInitialData,error:e(l).sesConfig.mail_driver.$error&&e(l).sesConfig.mail_driver.$errors[0].$message,required:""},{default:u(()=>[t(p,{modelValue:e(o).mail_driver,"onUpdate:modelValue":[a[0]||(a[0]=v=>e(o).mail_driver=v),s],options:e(g).mail_drivers,"can-deselect":!1,"content-loading":n.isFetchingInitialData,invalid:e(l).sesConfig.mail_driver.$error},null,8,["modelValue","options","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),t($,{label:h.$t("wizard.mail.host"),"content-loading":n.isFetchingInitialData,error:e(l).sesConfig.mail_host.$error&&e(l).sesConfig.mail_host.$errors[0].$message,required:""},{default:u(()=>[t(C,{modelValue:e(o).mail_host,"onUpdate:modelValue":a[1]||(a[1]=v=>e(o).mail_host=v),modelModifiers:{trim:!0},invalid:e(l).sesConfig.mail_host.$error,"content-loading":n.isFetchingInitialData,type:"text",name:"mail_host",onInput:a[2]||(a[2]=v=>e(l).sesConfig.mail_host.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),V("div",ya,[t($,{label:h.$t("wizard.mail.port"),"content-loading":n.isFetchingInitialData,error:e(l).sesConfig.mail_port.$error&&e(l).sesConfig.mail_port.$errors[0].$message,required:""},{default:u(()=>[t(C,{modelValue:e(o).mail_port,"onUpdate:modelValue":a[3]||(a[3]=v=>e(o).mail_port=v),modelModifiers:{trim:!0},invalid:e(l).sesConfig.mail_port.$error,"content-loading":n.isFetchingInitialData,type:"text",name:"mail_port",onInput:a[4]||(a[4]=v=>e(l).sesConfig.mail_port.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"]),t($,{label:h.$t("wizard.mail.encryption"),"content-loading":n.isFetchingInitialData,error:e(l).sesConfig.mail_encryption.$error&&e(l).sesConfig.mail_encryption.$errors[0].$message,required:""},{default:u(()=>[t(p,{modelValue:e(o).mail_encryption,"onUpdate:modelValue":a[5]||(a[5]=v=>e(o).mail_encryption=v),modelModifiers:{trim:!0},invalid:e(l).sesConfig.mail_encryption.$error,options:e(r),"content-loading":n.isFetchingInitialData,onInput:a[6]||(a[6]=v=>e(l).sesConfig.mail_encryption.$touch())},null,8,["modelValue","invalid","options","content-loading"])]),_:1},8,["label","content-loading","error"])]),V("div",Ia,[t($,{label:h.$t("wizard.mail.from_mail"),"content-loading":n.isFetchingInitialData,error:e(l).sesConfig.from_mail.$error&&e(l).sesConfig.from_mail.$errors[0].$message,required:""},{default:u(()=>[t(C,{modelValue:e(o).from_mail,"onUpdate:modelValue":a[7]||(a[7]=v=>e(o).from_mail=v),modelModifiers:{trim:!0},invalid:e(l).sesConfig.from_mail.$error,"content-loading":n.isFetchingInitialData,type:"text",name:"from_mail",onInput:a[8]||(a[8]=v=>e(l).sesConfig.from_mail.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"]),t($,{label:h.$t("wizard.mail.from_name"),"content-loading":n.isFetchingInitialData,error:e(l).sesConfig.from_name.$error&&e(l).sesConfig.from_name.$errors[0].$message,required:""},{default:u(()=>[t(C,{modelValue:e(o).from_name,"onUpdate:modelValue":a[9]||(a[9]=v=>e(o).from_name=v),modelModifiers:{trim:!0},invalid:e(l).sesConfig.from_name.$error,"content-loading":n.isFetchingInitialData,type:"text",name:"name",onInput:a[10]||(a[10]=v=>e(l).sesConfig.from_name.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),V("div",qa,[t($,{label:h.$t("wizard.mail.ses_key"),"content-loading":n.isFetchingInitialData,error:e(l).sesConfig.mail_ses_key.$error&&e(l).sesConfig.mail_ses_key.$errors[0].$message,required:""},{default:u(()=>[t(C,{modelValue:e(o).mail_ses_key,"onUpdate:modelValue":a[11]||(a[11]=v=>e(o).mail_ses_key=v),modelModifiers:{trim:!0},invalid:e(l).sesConfig.mail_ses_key.$error,"content-loading":n.isFetchingInitialData,type:"text",name:"mail_ses_key",onInput:a[12]||(a[12]=v=>e(l).sesConfig.mail_ses_key.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"]),t($,{label:h.$t("wizard.mail.ses_secret"),"content-loading":n.isFetchingInitialData,error:e(l).sesConfig.mail_ses_secret.$error&&e(l).sesConfig.mail_ses_secret.$errors[0].$message,required:""},{default:u(()=>[t(C,{modelValue:e(o).mail_ses_secret,"onUpdate:modelValue":a[15]||(a[15]=v=>e(o).mail_ses_secret=v),modelModifiers:{trim:!0},invalid:e(l).sesConfig.mail_ses_secret.$error,type:h.getInputType,"content-loading":n.isFetchingInitialData,name:"mail_ses_secret",autocomplete:"off","data-lpignore":"true",onInput:a[16]||(a[16]=v=>e(l).sesConfig.mail_ses_secret.$touch())},{right:u(()=>[e(i)?(B(),F(c,{key:0,name:"EyeOffIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:a[13]||(a[13]=v=>Z(i)?i.value=!e(i):i=!e(i))})):(B(),F(c,{key:1,name:"EyeIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:a[14]||(a[14]=v=>Z(i)?i.value=!e(i):i=!e(i))}))]),_:1},8,["modelValue","invalid","type","content-loading"])]),_:1},8,["label","content-loading","error"])]),t(_,{loading:n.isSaving,disabled:n.isSaving,"content-loading":n.isFetchingInitialData,class:"mt-4"},{left:u(v=>[n.isSaving?E("",!0):(B(),F(c,{key:0,name:"SaveIcon",class:O(v.class)},null,8,["class"]))]),default:u(()=>[P(" "+U(h.$t("general.save")),1)]),_:1},8,["loading","disabled","content-loading"])],40,wa)}}},Ca=["onSubmit"],Va={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},Da={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},be={props:{isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1}},emits:["submit-data","on-change-driver"],setup(n,{emit:q}){const{t:d}=G(),r=X(),i=z(()=>r.basicMailConfig);z(()=>r.mail_drivers),i.value.mail_driver="mail";const g=z(()=>({basicMailConfig:{mail_driver:{required:I.withMessage(d("validation.required"),D)},from_mail:{required:I.withMessage(d("validation.required"),D),email:I.withMessage(d("validation.email_incorrect"),H)},from_name:{required:I.withMessage(d("validation.required"),D)}}})),o=W(g,z(()=>r));function f(){return o.value.$touch(),o.value.$invalid||q("submit-data",r.basicMailConfig),!1}function l(){var m;o.value.basicMailConfig.mail_driver.$touch(),q("on-change-driver",(m=r==null?void 0:r.basicMailConfig)==null?void 0:m.mail_driver)}return(m,s)=>{const h=b("BaseMultiselect"),a=b("BaseInputGroup"),p=b("BaseInput"),$=b("BaseIcon"),C=b("BaseButton");return B(),k("form",{onSubmit:T(f,["prevent"])},[V("div",Va,[t(a,{label:m.$t("wizard.mail.driver"),"content-loading":n.isFetchingInitialData,error:e(o).basicMailConfig.mail_driver.$error&&e(o).basicMailConfig.mail_driver.$errors[0].$message,required:""},{default:u(()=>[t(h,{modelValue:e(i).mail_driver,"onUpdate:modelValue":[s[0]||(s[0]=c=>e(i).mail_driver=c),l],invalid:e(o).basicMailConfig.mail_driver.$error,options:e(r).mail_drivers,"can-deselect":!1,"content-loading":n.isFetchingInitialData},null,8,["modelValue","invalid","options","content-loading"])]),_:1},8,["label","content-loading","error"])]),V("div",Da,[t(a,{label:m.$t("wizard.mail.from_name"),"content-loading":n.isFetchingInitialData,error:e(o).basicMailConfig.from_name.$error&&e(o).basicMailConfig.from_name.$errors[0].$message,required:""},{default:u(()=>[t(p,{modelValue:e(i).from_name,"onUpdate:modelValue":s[1]||(s[1]=c=>e(i).from_name=c),modelModifiers:{trim:!0},invalid:e(o).basicMailConfig.from_name.$error,"content-loading":n.isFetchingInitialData,type:"text",name:"name",onInput:s[2]||(s[2]=c=>e(o).basicMailConfig.from_name.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"]),t(a,{label:m.$t("wizard.mail.from_mail"),"content-loading":n.isFetchingInitialData,error:e(o).basicMailConfig.from_mail.$error&&e(o).basicMailConfig.from_mail.$errors[0].$message,required:""},{default:u(()=>[t(p,{modelValue:e(i).from_mail,"onUpdate:modelValue":s[3]||(s[3]=c=>e(i).from_mail=c),modelModifiers:{trim:!0},invalid:e(o).basicMailConfig.from_mail.$error,"content-loading":n.isFetchingInitialData,type:"text",onInput:s[4]||(s[4]=c=>e(o).basicMailConfig.from_mail.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),t(C,{loading:n.isSaving,disabled:n.isSaving,"content-loading":n.isFetchingInitialData,class:"mt-4"},{left:u(c=>[n.isSaving?E("",!0):(B(),F($,{key:0,name:"SaveIcon",class:O(c.class)},null,8,["class"]))]),default:u(()=>[P(" "+U(m.$t("general.save")),1)]),_:1},8,["loading","disabled","content-loading"])],40,Ca)}}},Sa={components:{Smtp:pa,Mailgun:$a,Ses:Ba,sendmail:be,Mail:be},emits:["next"],setup(n,{emit:q}){const d=M(!1),r=M(!1),i=X();i.mail_driver="mail",o();function g(l){i.mail_driver=l}async function o(){r.value=!0,await i.fetchMailDrivers(),r.value=!1}async function f(l){d.value=!0;let m=await i.updateMailConfig(l);d.value=!1,m.data.success&&await q("next",5)}return{mailDriverStore:i,isSaving:d,isFetchingInitialData:r,changeDriver:g,next:f}}};function Fa(n,q,d,r,i,g){const o=b("BaseWizardStep");return B(),F(o,{title:n.$t("wizard.mail.mail_config"),description:n.$t("wizard.mail.mail_config_desc")},{default:u(()=>[V("form",{action:"",onSubmit:q[1]||(q[1]=T((...f)=>r.next&&r.next(...f),["prevent"]))},[(B(),F(le(r.mailDriverStore.mail_driver),{"config-data":r.mailDriverStore.mailConfigData,"is-saving":r.isSaving,"is-fetching-initial-data":r.isFetchingInitialData,onOnChangeDriver:q[0]||(q[0]=f=>r.changeDriver(f)),onSubmitData:r.next},null,8,["config-data","is-saving","is-fetching-initial-data","onSubmitData"]))],32)]),_:1},8,["title","description"])}var Ma=se(Sa,[["render",Fa]]);const za=["onSubmit"],ka={class:"grid grid-cols-1 mb-4 md:grid-cols-2 md:mb-6"},Ua={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},Pa={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},Na={emits:["next"],setup(n,{emit:q}){let d=M(!1);const r=M(!1),i=M(!1);let g=M(""),o=M(null);const f=ve(),l=te(),{t:m}=G(),s=z(()=>f.userForm),h=z(()=>({userForm:{name:{required:I.withMessage(m("validation.required"),D)},email:{required:I.withMessage(m("validation.required"),D),email:I.withMessage(m("validation.email_incorrect"),H)},password:{required:I.withMessage(m("validation.required"),D),minLength:I.withMessage(m("validation.password_min_length",{count:8}),Ie(8))},confirm_password:{required:I.withMessage(m("validation.required"),qe(f.userForm.password)),sameAsPassword:I.withMessage(m("validation.password_incorrect"),Be(f.userForm.password))}}})),a=W(h,z(()=>f));function p(c,_){o.value=_}function $(){o.value=null}async function C(){if(a.value.userForm.$touch(),a.value.userForm.$invalid)return!0;d.value=!0;let c=await f.updateCurrentUser(s.value);if(d.value=!1,c.data.data){if(o.value){let v=new FormData;v.append("admin_avatar",o.value),await f.uploadAvatar(v)}const _=c.data.data.companies[0];await l.setSelectedCompany(_),q("next",6)}}return(c,_)=>{const v=b("BaseFileUploader"),w=b("BaseInputGroup"),y=b("BaseInput"),x=b("EyeOffIcon"),Y=b("EyeIcon"),J=b("BaseIcon"),K=b("BaseButton"),N=b("BaseWizardStep");return B(),F(N,{title:c.$t("wizard.account_info"),description:c.$t("wizard.account_info_desc")},{default:u(()=>[V("form",{action:"",onSubmit:T(C,["prevent"])},[V("div",ka,[t(w,{label:c.$tc("settings.account_settings.profile_picture")},{default:u(()=>[t(v,{avatar:!0,"preview-image":e(g),onChange:p,onRemove:$},null,8,["preview-image"])]),_:1},8,["label"])]),V("div",Ua,[t(w,{label:c.$t("wizard.name"),error:e(a).userForm.name.$error&&e(a).userForm.name.$errors[0].$message,required:""},{default:u(()=>[t(y,{modelValue:e(s).name,"onUpdate:modelValue":_[0]||(_[0]=S=>e(s).name=S),modelModifiers:{trim:!0},invalid:e(a).userForm.name.$error,type:"text",name:"name",onInput:_[1]||(_[1]=S=>e(a).userForm.name.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),t(w,{label:c.$t("wizard.email"),error:e(a).userForm.email.$error&&e(a).userForm.email.$errors[0].$message,required:""},{default:u(()=>[t(y,{modelValue:e(s).email,"onUpdate:modelValue":_[2]||(_[2]=S=>e(s).email=S),modelModifiers:{trim:!0},invalid:e(a).userForm.email.$error,type:"text",name:"email",onInput:_[3]||(_[3]=S=>e(a).userForm.email.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"])]),V("div",Pa,[t(w,{label:c.$t("wizard.password"),error:e(a).userForm.password.$error&&e(a).userForm.password.$errors[0].$message,required:""},{default:u(()=>[t(y,{modelValue:e(s).password,"onUpdate:modelValue":_[6]||(_[6]=S=>e(s).password=S),modelModifiers:{trim:!0},invalid:e(a).userForm.password.$error,type:r.value?"text":"password",name:"password",onInput:_[7]||(_[7]=S=>e(a).userForm.password.$touch())},{right:u(()=>[r.value?(B(),F(x,{key:0,class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:_[4]||(_[4]=S=>r.value=!r.value)})):(B(),F(Y,{key:1,class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:_[5]||(_[5]=S=>r.value=!r.value)}))]),_:1},8,["modelValue","invalid","type"])]),_:1},8,["label","error"]),t(w,{label:c.$t("wizard.confirm_password"),error:e(a).userForm.confirm_password.$error&&e(a).userForm.confirm_password.$errors[0].$message,required:""},{default:u(()=>[t(y,{modelValue:e(s).confirm_password,"onUpdate:modelValue":_[10]||(_[10]=S=>e(s).confirm_password=S),modelModifiers:{trim:!0},invalid:e(a).userForm.confirm_password.$error,type:i.value?"text":"password",name:"confirm_password",onInput:_[11]||(_[11]=S=>e(a).userForm.confirm_password.$touch())},{right:u(()=>[i.value?(B(),F(J,{key:0,name:"EyeOffIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:_[8]||(_[8]=S=>i.value=!i.value)})):(B(),F(J,{key:1,name:"EyeIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:_[9]||(_[9]=S=>i.value=!i.value)}))]),_:1},8,["modelValue","invalid","type"])]),_:1},8,["label","error"])]),t(K,{loading:e(d),disabled:e(d),class:"mt-4"},{left:u(S=>[e(d)?E("",!0):(B(),F(J,{key:0,name:"SaveIcon",class:O(S.class)},null,8,["class"]))]),default:u(()=>[P(" "+U(c.$t("wizard.save_cont")),1)]),_:1},8,["loading","disabled"])],40,za)]),_:1},8,["title","description"])}}},Ea=["onSubmit"],Ga={class:"grid grid-cols-1 mb-4 md:grid-cols-2 md:mb-6"},Oa={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},xa={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},La={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},Wa={emits:["next"],setup(n,{emit:q}){let d=M(!1),r=M(!1);const{t:i}=G();let g=M(null),o=M(null),f=M(null);const l=j({name:null,address:{address_street_1:"",address_street_2:"",website:"",country_id:null,state:"",city:"",phone:"",zip:""}}),m=te(),s=_e();Q(async()=>{var c;d.value=!0,await s.fetchCountries(),d.value=!1,l.address.country_id=(c=s.countries.find(_=>_.code=="US"))==null?void 0:c.id});const h={companyForm:{name:{required:I.withMessage(i("validation.required"),D)},address:{country_id:{required:I.withMessage(i("validation.required"),D)},address_street_1:{maxLength:I.withMessage(i("validation.address_maxlength",{count:255}),ge(255))},address_street_2:{maxLength:I.withMessage(i("validation.address_maxlength",{count:255}),ge(255))}}}},a=W(h,{companyForm:l});function p(c,_,v,w){f.value=w.name,o.value=_}function $(){o.value=null}async function C(){if(a.value.companyForm.$touch(),a.value.$invalid)return!0;if(r.value=!0,m.updateCompany(l)){if(o.value){let _=new FormData;_.append("company_logo",JSON.stringify({name:f.value,data:o.value})),await m.updateCompanyLogo(_)}r.value=!1,q("next",7)}}return(c,_)=>{const v=b("BaseFileUploader"),w=b("BaseInputGroup"),y=b("BaseInput"),x=b("BaseMultiselect"),Y=b("BaseTextarea"),J=b("BaseIcon"),K=b("BaseButton"),N=b("BaseWizardStep");return B(),F(N,{title:c.$t("wizard.company_info"),description:c.$t("wizard.company_info_desc"),"step-container":"bg-white border border-gray-200 border-solid mb-8 md:w-full p-8 rounded w-full"},{default:u(()=>[V("form",{action:"",onSubmit:T(C,["prevent"])},[V("div",Ga,[t(w,{label:c.$tc("settings.company_info.company_logo")},{default:u(()=>[t(v,{base64:"","preview-image":e(g),onChange:p,onRemove:$},null,8,["preview-image"])]),_:1},8,["label"])]),V("div",Oa,[t(w,{label:c.$t("wizard.company_name"),error:e(a).companyForm.name.$error&&e(a).companyForm.name.$errors[0].$message,required:""},{default:u(()=>[t(y,{modelValue:e(l).name,"onUpdate:modelValue":_[0]||(_[0]=S=>e(l).name=S),modelModifiers:{trim:!0},invalid:e(a).companyForm.name.$error,type:"text",name:"name",onInput:_[1]||(_[1]=S=>e(a).companyForm.name.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),t(w,{label:c.$t("wizard.country"),error:e(a).companyForm.address.country_id.$error&&e(a).companyForm.address.country_id.$errors[0].$message,"content-loading":e(d),required:""},{default:u(()=>[t(x,{modelValue:e(l).address.country_id,"onUpdate:modelValue":_[2]||(_[2]=S=>e(l).address.country_id=S),label:"name",invalid:e(a).companyForm.address.country_id.$error,options:e(s).countries,"value-prop":"id","can-deselect":!1,"can-clear":!1,"content-loading":e(d),placeholder:c.$t("general.select_country"),searchable:"","track-by":"name"},null,8,["modelValue","invalid","options","content-loading","placeholder"])]),_:1},8,["label","error","content-loading"])]),V("div",xa,[t(w,{label:c.$t("wizard.state")},{default:u(()=>[t(y,{modelValue:e(l).address.state,"onUpdate:modelValue":_[3]||(_[3]=S=>e(l).address.state=S),name:"state",type:"text"},null,8,["modelValue"])]),_:1},8,["label"]),t(w,{label:c.$t("wizard.city")},{default:u(()=>[t(y,{modelValue:e(l).address.city,"onUpdate:modelValue":_[4]||(_[4]=S=>e(l).address.city=S),name:"city",type:"text"},null,8,["modelValue"])]),_:1},8,["label"])]),V("div",La,[V("div",null,[t(w,{label:c.$t("wizard.address"),error:e(a).companyForm.address.address_street_1.$error&&e(a).companyForm.address.address_street_1.$errors[0].$message},{default:u(()=>[t(Y,{modelValue:e(l).address.address_street_1,"onUpdate:modelValue":_[5]||(_[5]=S=>e(l).address.address_street_1=S),modelModifiers:{trim:!0},invalid:e(a).companyForm.address.address_street_1.$error,placeholder:c.$t("general.street_1"),name:"billing_street1",rows:"2",onInput:_[6]||(_[6]=S=>e(a).companyForm.address.address_street_1.$touch())},null,8,["modelValue","invalid","placeholder"])]),_:1},8,["label","error"]),t(w,{error:e(a).companyForm.address.address_street_2.$error&&e(a).companyForm.address.address_street_2.$errors[0].$message,class:"mt-1 lg:mt-2 md:mt-2"},{default:u(()=>[t(Y,{modelValue:e(l).address.address_street_2,"onUpdate:modelValue":_[7]||(_[7]=S=>e(l).address.address_street_2=S),invalid:e(a).companyForm.address.address_street_2.$error,placeholder:c.$t("general.street_2"),name:"billing_street2",rows:"2",onInput:_[8]||(_[8]=S=>e(a).companyForm.address.address_street_2.$touch())},null,8,["modelValue","invalid","placeholder"])]),_:1},8,["error"])]),V("div",null,[t(w,{label:c.$t("wizard.zip_code")},{default:u(()=>[t(y,{modelValue:e(l).address.zip,"onUpdate:modelValue":_[9]||(_[9]=S=>e(l).address.zip=S),modelModifiers:{trim:!0},type:"text",name:"zip"},null,8,["modelValue"])]),_:1},8,["label"]),t(w,{label:c.$t("wizard.phone"),class:"mt-4"},{default:u(()=>[t(y,{modelValue:e(l).address.phone,"onUpdate:modelValue":_[10]||(_[10]=S=>e(l).address.phone=S),modelModifiers:{trim:!0},type:"text",name:"phone"},null,8,["modelValue"])]),_:1},8,["label"])])]),t(K,{loading:e(r),disabled:e(r),class:"mt-4"},{left:u(S=>[e(r)?E("",!0):(B(),F(J,{key:0,name:"SaveIcon",class:O(S.class)},null,8,["class"]))]),default:u(()=>[P(" "+U(c.$t("wizard.save_cont")),1)]),_:1},8,["loading","disabled"])],40,Ea)]),_:1},8,["title","description"])}}},Ta=["onSubmit"],ja={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},Ra={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},Aa={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},Ya={emits:["next"],setup(n,{emit:q}){const d=M(!1);let r=M(!1),i=j({currency:1,language:"en",carbon_date_format:"d M Y",time_zone:"UTC",fiscal_year:"1-12"});const{tm:g,t:o}=G(),f=pe();r.value=!0,j([{title:g("settings.customization.invoices.allow"),value:"allow"},{title:g("settings.customization.invoices.disable_on_invoice_partial_paid"),value:"disable_on_invoice_partial_paid"},{title:g("settings.customization.invoices.disable_on_invoice_paid"),value:"disable_on_invoice_paid"},{title:g("settings.customization.invoices.disable_on_invoice_sent"),value:"disable_on_invoice_sent"}]);const l=fe(),m=_e(),s=te(),h=ve(),a=de();let p={key:"fiscal_years"},$={key:"languages"};r.value=!0,Promise.all([m.fetchCurrencies(),m.fetchDateFormats(),m.fetchTimeZones(),m.fetchCountries(),m.fetchConfig(p),m.fetchConfig($)]).then(([v])=>{r.value=!1});const C=z(()=>({currentPreferences:{currency:{required:I.withMessage(o("validation.required"),D)},language:{required:I.withMessage(o("validation.required"),D)},carbon_date_format:{required:I.withMessage(o("validation.required"),D)},time_zone:{required:I.withMessage(o("validation.required"),D)},fiscal_year:{required:I.withMessage(o("validation.required"),D)}}})),c=W(C,{currentPreferences:i});async function _(){if(c.value.currentPreferences.$touch(),c.value.$invalid)return!0;l.openDialog({title:o("general.do_you_wish_to_continue"),message:o("wizard.currency_set_alert"),yesLabel:o("general.ok"),noLabel:o("general.cancel"),variant:"danger",size:"lg",hideNoButton:!1}).then(async v=>{if(v){let w={settings:ce({},i)};d.value=!0,delete w.settings.discount_per_item;let y=await s.updateCompanySettings({data:w});if(y.data){d.value=!1;let x={settings:{language:i.language}};(await h.updateUserSettings(x)).data&&(q("next","COMPLETED"),a.showNotification({type:"success",message:"Login Successful"}),f.push("/admin/dashboard")),Ce.set("auth.token",y.data.token)}return!0}return d.value=!1,!0})}return(v,w)=>{const y=b("BaseMultiselect"),x=b("BaseInputGroup"),Y=b("BaseIcon"),J=b("BaseButton"),K=b("BaseWizardStep");return B(),F(K,{title:v.$t("wizard.preferences"),description:v.$t("wizard.preferences_desc"),"step-container":"bg-white border border-gray-200 border-solid mb-8 md:w-full p-8 rounded w-full"},{default:u(()=>[V("form",{action:"",onSubmit:T(_,["prevent"])},[V("div",null,[V("div",ja,[t(x,{label:v.$t("wizard.currency"),error:e(c).currentPreferences.currency.$error&&e(c).currentPreferences.currency.$errors[0].$message,"content-loading":e(r),required:""},{default:u(()=>[t(y,{modelValue:e(i).currency,"onUpdate:modelValue":w[0]||(w[0]=N=>e(i).currency=N),"content-loading":e(r),options:e(m).currencies,label:"name","value-prop":"id",searchable:!0,"track-by":"name",placeholder:v.$tc("settings.currencies.select_currency"),invalid:e(c).currentPreferences.currency.$error,class:"w-full"},null,8,["modelValue","content-loading","options","placeholder","invalid"])]),_:1},8,["label","error","content-loading"]),t(x,{label:v.$t("settings.preferences.default_language"),error:e(c).currentPreferences.language.$error&&e(c).currentPreferences.language.$errors[0].$message,"content-loading":e(r),required:""},{default:u(()=>[t(y,{modelValue:e(i).language,"onUpdate:modelValue":w[1]||(w[1]=N=>e(i).language=N),"content-loading":e(r),options:e(m).languages,label:"name","value-prop":"code",placeholder:v.$tc("settings.preferences.select_language"),class:"w-full","track-by":"name",searchable:!0,invalid:e(c).currentPreferences.language.$error},null,8,["modelValue","content-loading","options","placeholder","invalid"])]),_:1},8,["label","error","content-loading"])]),V("div",Ra,[t(x,{label:v.$t("wizard.date_format"),error:e(c).currentPreferences.carbon_date_format.$error&&e(c).currentPreferences.carbon_date_format.$errors[0].$message,"content-loading":e(r),required:""},{default:u(()=>[t(y,{modelValue:e(i).carbon_date_format,"onUpdate:modelValue":w[2]||(w[2]=N=>e(i).carbon_date_format=N),"content-loading":e(r),options:e(m).dateFormats,label:"display_date","value-prop":"carbon_format_value",placeholder:v.$tc("settings.preferences.select_date_format"),"track-by":"display_date",searchable:"",invalid:e(c).currentPreferences.carbon_date_format.$error,class:"w-full"},null,8,["modelValue","content-loading","options","placeholder","invalid"])]),_:1},8,["label","error","content-loading"]),t(x,{label:v.$t("wizard.time_zone"),error:e(c).currentPreferences.time_zone.$error&&e(c).currentPreferences.time_zone.$errors[0].$message,"content-loading":e(r),required:""},{default:u(()=>[t(y,{modelValue:e(i).time_zone,"onUpdate:modelValue":w[3]||(w[3]=N=>e(i).time_zone=N),"content-loading":e(r),options:e(m).timeZones,label:"key","value-prop":"value",placeholder:v.$tc("settings.preferences.select_time_zone"),"track-by":"key",searchable:!0,invalid:e(c).currentPreferences.time_zone.$error},null,8,["modelValue","content-loading","options","placeholder","invalid"])]),_:1},8,["label","error","content-loading"])]),V("div",Aa,[t(x,{label:v.$t("wizard.fiscal_year"),error:e(c).currentPreferences.fiscal_year.$error&&e(c).currentPreferences.fiscal_year.$errors[0].$message,"content-loading":e(r),required:""},{default:u(()=>[t(y,{modelValue:e(i).fiscal_year,"onUpdate:modelValue":w[4]||(w[4]=N=>e(i).fiscal_year=N),"content-loading":e(r),options:e(m).fiscalYears,label:"key","value-prop":"value",placeholder:v.$tc("settings.preferences.select_financial_year"),invalid:e(c).currentPreferences.fiscal_year.$error,"track-by":"key",searchable:!0,class:"w-full"},null,8,["modelValue","content-loading","options","placeholder","invalid"])]),_:1},8,["label","error","content-loading"])]),t(J,{loading:d.value,disabled:d.value,"content-loading":e(r),class:"mt-4"},{left:u(N=>[t(Y,{name:"SaveIcon",class:O(N.class)},null,8,["class"])]),default:u(()=>[P(" "+U(v.$t("wizard.save_cont")),1)]),_:1},8,["loading","disabled","content-loading"])])],40,Ta)]),_:1},8,["title","description"])}}};var Ja="/build/img/crater-logo.png";const Za={components:{step_1:Oe,step_2:Ae,step_3:ia,step_4:sa,step_5:Ma,step_6:Na,step_7:Wa,step_8:Ya},setup(){let n=M("step_1"),q=M(1);const d=pe(),r=A();i();async function i(){let l=await r.fetchInstallationStep();if(l.data.profile_complete==="COMPLETED"){d.push("/admin/dashboard");return}let m=parseInt(l.data.profile_complete);m&&(q.value=m+1,n.value=`step_${m+1}`)}async function g(l){var s,h;let m={profile_complete:l};try{return await r.addInstallationStep(m),!0}catch(a){return((h=(s=a==null?void 0:a.response)==null?void 0:s.data)==null?void 0:h.message)==="The MAC is invalid."&&window.location.reload(),!1}}async function o(l){if(l&&!await g(l))return!1;q.value++,q.value<=8&&(n.value="step_"+q.value)}function f(l){}return{stepComponent:n,currentStepNumber:q,onStepChange:o,saveStepProgress:g,onNavClick:f}}},Ka={class:"flex flex-col items-center justify-between w-full pt-10"},Qa=V("img",{id:"logo-crater",src:Ja,alt:"Crater Logo",class:"h-12 mb-5 md:mb-10"},null,-1);function Ha(n,q,d,r,i,g){const o=b("BaseWizard");return B(),k("div",Ka,[Qa,t(o,{steps:7,"current-step":r.currentStepNumber,onClick:r.onNavClick},{default:u(()=>[(B(),F(le(r.stepComponent),{onNext:r.onStepChange},null,8,["onNext"]))]),_:1},8,["current-step","onClick"])])}var nt=se(Za,[["render",Ha]]);export{nt as default};
